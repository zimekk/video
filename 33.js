/*! For license information please see 33.js.LICENSE.txt */
(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[33],{4033:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>u});var n=r(2784),a=r(2779),l=r.n(a),c=r(1111);const i=Object.freeze({GRAY_SCALE:"GRAY_SCALE",CHROMA_KEY:"CHROMA_KEY"}),s=["https://webrtc.github.io/samples/src/video/chrome.webm","https://mdn.github.io/dom-examples/canvas/chroma-keying/media/video.mp4"];function u({counter:e}){const[t,r]=(0,n.useState)([]),[a,u]=(0,n.useState)([]),[o,d]=(0,n.useState)([]),[f,h]=(0,n.useState)(Object.keys(i)[0]),[m,g]=(0,n.useState)(s[0]),v=(0,n.useRef)(),p=(0,n.useRef)(),b=(0,n.useCallback)((()=>{d((e=>e.concat(p.current.toDataURL())))}),[d]),E=(0,n.useCallback)((()=>{d((e=>e.filter(((e,t)=>!a.includes(t))))),u([])}),[a,d]),w=(0,n.useCallback)((e=>{u((t=>t.includes(e)?t.filter((t=>e!==t)):t.concat(e)))}),[u]),y=(0,n.useRef)(e);(0,n.useEffect)((()=>{y.current=e}),[e]),(0,n.useEffect)((()=>{const e=p.current.getContext("2d"),t=(t,r,n,a="left")=>{e.font="30px Sans-serif",e.textAlign=a,e.strokeStyle="black",e.lineWidth=4,e.strokeText(t,r,n),e.fillStyle="white",e.fillText(t,r,n)},n=()=>{if(v.current.ended||v.current.paused)return;e.drawImage(v.current,0,0,v.current.width,v.current.height);const r=e.getImageData(0,0,p.current.width,p.current.height),{data:a}=r;for(let e=0;e<a.length;e+=4){const t=a[e],r=a[e+1],n=a[e+2];if(f===i.GRAY_SCALE){var l=(t+r+n)/3;a[e]=l,a[e+1]=l,a[e+2]=l}else f===i.CHROMA_KEY&&r>100&&t>100&&n<43&&(a[e+3]=0)}e.putImageData(r,0,0,0,0,v.current.width,v.current.height),t(y.current,10,40),t(v.current.currentTime,470,250,"right"),v.current.requestVideoFrameCallback(n)},a=()=>{v.current.requestVideoFrameCallback(n)};return v.current.addEventListener("play",a,!1),v.current.addEventListener("loadedmetadata",(()=>{const{videoWidth:e,videoHeight:t,duration:n}=v.current;console.log(["loadedmetadata"],{videoWidth:e,videoHeight:t,duration:n}),r([...Array(Math.floor(n))].map(((e,t)=>t)))})),v.current.addEventListener("timeupdate",(()=>{const{currentTime:e}=v.current;console.log(["timeupdate"],{currentTime:e})})),()=>{v.current.removeEventListener("play",a)}}),[v,p,m,f]);const[C,S]=[240,135];return n.createElement("div",null,n.createElement("div",null,n.createElement("select",{value:m,onChange:e=>g(e.target.value)},s.map(((e,t)=>n.createElement("option",{key:t,value:e},e))))),n.createElement("video",{ref:v,src:m,width:C,height:S,crossOrigin:"anonymous",controls:!0}),n.createElement("div",null,n.createElement("select",{value:f,onChange:e=>h(e.target.value)},Object.entries(i).map((([e,t],r)=>n.createElement("option",{key:r,value:e},t))))),n.createElement("div",null,n.createElement("canvas",{ref:p,className:c.Z.Canvas,width:C,height:S})),n.createElement("div",null,n.createElement("select",{onChange:e=>v.current.currentTime=e.target.value},t.map(((e,t)=>n.createElement("option",{key:t,value:e},e)))),n.createElement("button",{onClick:()=>b()},"capture")," ",n.createElement("button",{onClick:()=>E(),disabled:0==a.length},"remove")," "),n.createElement("div",null,o.map(((e,t)=>n.createElement("img",{key:t,src:e,className:l()(c.Z.Image,a.includes(t)&&c.Z.Image__Selected),width:C,height:S,alt:"",onClick:()=>w(t)})))))}},2779:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var l=typeof r;if("string"===l||"number"===l)e.push(r);else if(Array.isArray(r)){if(r.length){var c=a.apply(null,r);c&&e.push(c)}}else if("object"===l)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},1921:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>o});var n=r(2609),a=r.n(n),l=r(8991),c=r.n(l),i=new URL(r(7658),r.b),s=a()((function(e){return e[1]})),u=c()(i);s.push([e.id,"._44wV4FCd3ZNFDOFiXas,.H7AfsezmpbvUGTdStS0g{background:#fff url("+u+");background-size:5%}.H7AfsezmpbvUGTdStS0g{border:1px solid gray}.BbcEt_1dpTgn_Qlfh3qe{border-color:blue}",""]),s.locals={Canvas:"_44wV4FCd3ZNFDOFiXas",Image:"H7AfsezmpbvUGTdStS0g",Image__Selected:"BbcEt_1dpTgn_Qlfh3qe"};const o=s},8991:e=>{"use strict";e.exports=function(e,t){return t||(t={}),e?(e=String(e.__esModule?e.default:e),/^['"].*['"]$/.test(e)&&(e=e.slice(1,-1)),t.hash&&(e+=t.hash),/["'() \t\n]|(%20)/.test(e)||t.needQuotes?'"'.concat(e.replace(/"/g,'\\"').replace(/\n/g,"\\n"),'"'):e):e}},1111:(e,t,r)=>{"use strict";r.d(t,{Z:()=>w});var n=r(6062),a=r.n(n),l=r(4036),c=r.n(l),i=r(6793),s=r.n(i),u=r(7892),o=r.n(u),d=r(1173),f=r.n(d),h=r(2464),m=r.n(h),g=r(1921),v={};v.styleTagTransform=m(),v.setAttributes=o(),v.insert=s().bind(null,"head"),v.domAPI=c(),v.insertStyleElement=f();var p=a()(g.default,v);if(!g.default.locals||e.hot.invalidate){var b=!g.default.locals,E=b?g:g.default.locals;e.hot.accept(1921,(t=>{g=r(1921),function(e,t,r){if(!e&&t||e&&!t)return!1;var n;for(n in e)if((!r||"default"!==n)&&e[n]!==t[n])return!1;for(n in t)if(!(r&&"default"===n||e[n]))return!1;return!0}(E,b?g:g.default.locals,b)?(E=b?g:g.default.locals,p(g.default)):e.hot.invalidate()}))}e.hot.dispose((function(){p()}));const w=g.default&&g.default.locals?g.default.locals:void 0},7658:e=>{"use strict";e.exports='data:image/svg+xml,   <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"         fill-opacity=".05" >            <rect x="100" width="100" height="100" />            <rect y="100" width="100" height="100" />            </svg>'}}]);