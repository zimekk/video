"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[773],{2773:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xt});var r=n(2784),a=n(8379),i=n(7876);function o(){return(o=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const s=(0,r.createContext)(null),c=(0,r.createContext)(0);function l({time:e,children:t=null,...n}){const a=(0,r.useRef)();return r.createElement(s.Provider,{value:a.current?.getContext("2d")},r.createElement(c.Provider,{value:e},r.createElement("canvas",o({ref:a},n)),t))}function u({video:e,children:t=null}){const n=(0,r.useContext)(s);return n&&n.drawImage(e.current,0,0,e.current.width,e.current.height),t}function h({children:e=null}){const t=(0,r.useContext)(s);if((0,r.useContext)(c),t){const e=t.getImageData(0,0,t.canvas.width,t.canvas.height),{data:r}=e;for(let e=0;e<r.length;e+=4){var n=(r[e]+r[e+1]+r[e+2])/3;r[e]=n,r[e+1]=n,r[e+2]=n}t.putImageData(e,0,0,0,0,t.canvas.width,t.canvas.height)}return e}function d({children:e=null}){const t=(0,r.useContext)(s),n=(0,r.useContext)(c);return t&&(t.fillStyle="#000000",t.beginPath(),t.arc(t.canvas.width/2,t.canvas.height/2,t.canvas.height/2*Math.sin(2*n)**2,0,2*Math.PI),t.fill()),e}function m({children:e=null}){const t=(0,r.useContext)(s),n=(0,r.useContext)(c);return t&&((e,n,r,a="left")=>{t.font="30px Sans-serif",t.textAlign=a,t.strokeStyle="black",t.lineWidth=4,t.strokeText(e,n,r),t.fillStyle="white",t.fillText(e,n,r)})(n,470,250,"right"),e}function v(){const[e,t]=(0,r.useState)(0),n="https://webrtc.github.io/samples/src/video/chrome.webm",a=(0,r.useRef)();return(0,r.useEffect)((()=>{const e=()=>{a.current.ended||a.current.paused||(t(a.current.currentTime),a.current.requestVideoFrameCallback(e))},n=()=>{a.current.requestVideoFrameCallback(e)};return a.current.addEventListener("play",n,!0),a.current.addEventListener("loadedmetadata",(()=>{const{videoWidth:e,videoHeight:t,duration:n}=a.current;console.log(["loadedmetadata"],{videoWidth:e,videoHeight:t,duration:n})})),a.current.addEventListener("timeupdate",(()=>{const{currentTime:e}=a.current;console.log(["timeupdate"],{currentTime:e})})),()=>{a.current.removeEventListener("play",n)}}),[a,n]),r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:a,src:n,width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(l,{width:"480",height:"270",time:e},r.createElement(u,{video:a}),r.createElement(h,null),r.createElement(d,null),r.createElement(m,null))))}var f=n(3328),p=n.n(f);function g(){return(g=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const y=["#FF1461","#18FF92","#5A87FF","#FBF38C"];function x(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}class w{constructor(){this.points=[]}init(){for(let e=0;e<this.numPoints;e++){const t=new E(this.divisional*(e+1),this);this.push(t)}}render(e){const{canvas:t,ctx:n,points:r,numPoints:a,center:i,video:o}=this;if(n.clearRect(0,0,t.width,t.height),n.drawImage(o,0,0,o.width,o.height),n.lineWidth=2,n.strokeStyle=y[1],n.strokeRect(20,20,20,20),e){const t=e/6%360,r=Math.min(Math.abs((t-180)/180),1);n.save(),n.translate(85,40+20*x(r)),n.beginPath(),[30,90,150,210,270,330,30].forEach(((e,t)=>{const a=(e+180*x(r))*Math.PI/180;n[t?"lineTo":"moveTo"](10*Math.cos(a),10*Math.sin(a))})),n.strokeStyle=y[0],n.stroke(),n.restore()}if(e){const t=e/2%360;n.save(),n.translate(30,95),n.rotate(t*Math.PI/180),n.translate(-30,-95),n.lineWidth=2,n.beginPath(),n.moveTo(10,90),n.lineTo(20,100),n.lineTo(30,90),n.lineTo(40,100),n.lineTo(50,90),n.strokeStyle=y[1],n.stroke(),n.restore()}if(e){const t=e/4%180;n.translate(60,65),n.scale(1-Math.sin(t*Math.PI/180)/2,1-Math.sin(t*Math.PI/180)/2),n.translate(-60,-65),n.lineWidth=3,n.beginPath(),n.arc(60,65,15,0,2*Math.PI,!0),n.strokeStyle=y[2],n.stroke(),n.restore(),n.setTransform(1,0,0,1,0,0)}if(e){const t=-e/5%360,r=-e/7%360;n.lineWidth=5,n.beginPath(),n.arc(75,100,10,t*Math.PI/180,t*Math.PI/180+1.5*Math.PI+Math.sin(r*Math.PI/180),!1),n.strokeStyle=y[3],n.stroke()}if(n.beginPath(),n.arc(60,165,15,0,2*Math.PI,!0),n.fillStyle=y[0],n.fill(),e){const t=e/5%180;n.lineWidth=2+2*Math.sin(t*Math.PI/180),n.beginPath(),n.arc(70,130,5,0,Math.PI,!1),n.arc(60,130,5,0,Math.PI,!0),n.arc(50,130,5,0,Math.PI,!1),n.arc(40,130,5,0,Math.PI,!0),n.arc(30,130,5,0,Math.PI,!1),n.arc(20,130,5,0,Math.PI,!0),n.strokeStyle=y[3],n.stroke()}if(e){const t=[[-1,0],[-.5,.5],[.5,-.5],[1,0]],r=2,a=[0,0,0,1,2,2,2],i=e/6%360/360,[o,s]=p()(i%1,r,t,a);n.translate(50,200+40*s),n.rotate(o*Math.PI),n.lineWidth=3,n.beginPath(),n.moveTo(-10,0),n.lineTo(10,0),n.moveTo(0,-10),n.lineTo(0,10),n.strokeStyle=y[2],n.stroke(),n.restore(),n.setTransform(1,0,0,1,0,0),n.lineWidth=1;for(let e=0;e<i;e+=.01){const[i,o]=p()(e%1,r,t,a);n.strokeStyle=y[0],n.strokeRect(50+40*i,200+40*o,1,1),n.strokeStyle=y[1],n.strokeRect(10+40*e,200+40*i,1,1)}}const s=new Path2D;s.rect(10,10,20,20);const c=new Path2D;c.arc(70,15,15,0,2*Math.PI),n.strokeStyle=y[3],n.stroke(s),n.fillStyle=y[2],n.fill(c);const l=new Path2D("M5 60 l 15 10 l 5 -15 l 15 10");n.strokeStyle=y[0],n.stroke(l),r[0].solveWith(r[a-1],r[1]);const u=r[a-1].position;let h=r[0].position;const d=h;n.beginPath(),n.moveTo(i.x,i.y),n.moveTo((u.x+h.x)/2,(u.y+h.y)/2);for(let e=1;e<a;e++){r[e].solveWith(r[e-1],r[e+1]||r[0]);const t=r[e].position,a=(h.x+t.x)/2,i=(h.y+t.y)/2;n.quadraticCurveTo(h.x,h.y,a,i),n.fillStyle="#000000",h=t}const m=(h.x+d.x)/2,v=(h.y+d.y)/2;n.quadraticCurveTo(h.x,h.y,m,v),n.fillStyle=this.color,n.fill(),n.strokeStyle="#000000",requestAnimationFrame(this.render.bind(this))}push(e){e instanceof E&&this.points.push(e)}set color(e){this._color=e}get color(){return this._color||"#000000"}set canvas(e){e instanceof HTMLElement&&"canvas"===e.tagName.toLowerCase()&&(this._canvas=e,this.ctx=this._canvas.getContext("2d"))}get canvas(){return this._canvas}set numPoints(e){e>2&&(this._points=e)}get numPoints(){return this._points||32}set radius(e){e>0&&(this._radius=e)}get radius(){return this._radius||150}set position(e){"object"==typeof e&&e.x&&e.y&&(this._position=e)}get position(){return this._position||{x:.5,y:.5}}get divisional(){return 2*Math.PI/this.numPoints}get center(){return{x:this.canvas.width*this.position.x,y:this.canvas.height*this.position.y}}set running(e){this._running=!0===e}get running(){return!1!==this.running}}class E{constructor(e,t){this.parent=t,this.azimuth=Math.PI-e,this._components={x:Math.cos(this.azimuth),y:Math.sin(this.azimuth)},this.acceleration=.6*Math.random()-.3}solveWith(e,t){this.acceleration=(-.3*this.radialEffect+(e.radialEffect-this.radialEffect)+(t.radialEffect-this.radialEffect))*this.elasticity-this.speed*this.friction}set acceleration(e){"number"==typeof e&&(this._acceleration=e,this.speed+=2*this._acceleration)}get acceleration(){return this._acceleration||0}set speed(e){"number"==typeof e&&(this._speed=e,this.radialEffect+=5*this._speed)}get speed(){return this._speed||0}set radialEffect(e){"number"==typeof e&&(this._radialEffect=e)}get radialEffect(){return this._radialEffect||0}get position(){return{x:this.parent.center.x+this.components.x*(this.parent.radius+this.radialEffect),y:this.parent.center.y+this.components.y*(this.parent.radius+this.radialEffect)}}get components(){return this._components}set elasticity(e){"number"==typeof e&&(this._elasticity=e)}get elasticity(){return this._elasticity||.001}set friction(e){"number"==typeof e&&(this._friction=e)}get friction(){return this._friction||.0085}}function b({video:e,children:t=null,...n}){const a=(0,r.useRef)();return(0,r.useEffect)((()=>{const t=new w;!function(){a.current.setAttribute("touch-action","none");let n={x:0,y:0},r=!1;window.addEventListener("pointermove",(function(e){const{x:i,y:o}=a.current.getBoundingClientRect(),s=t.center.x+i,c=t.center.y+o,l=e.clientX-s,u=e.clientY-c,h=Math.sqrt(l*l+u*u);let d=null;if(t.mousePos={x:s-e.clientX,y:c-e.clientY},h<t.radius&&!1===r){const t={x:e.clientX-s,y:e.clientY-c};d=Math.atan2(t.y,t.x),r=!0}else if(h>t.radius&&!0===r){const n={x:e.clientX-s,y:e.clientY-c};d=Math.atan2(n.y,n.x),r=!1,t.color=null}if("number"==typeof d){let a=null,i=100;if(t.points.forEach((e=>{Math.abs(d-e.azimuth)<i&&(a=e,i=Math.abs(d-e.azimuth))})),a){let t={x:n.x-e.clientX,y:n.y-e.clientY};t=10*Math.sqrt(t.x*t.x+t.y*t.y),t>100&&(t=100),a.acceleration=t/100*(r?-1:1)}}n.x=e.clientX,n.y=e.clientY})),t.canvas=a.current,t.video=e.current,t.init(),t.render()}()}),[a]),r.createElement("canvas",g({ref:a},n))}function M(){const e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(b,{video:e,width:"480",height:"270"})))}function _(){return(_=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const C=(0,r.createContext)(0),k=(0,r.createContext)(null),P=(e,t)=>e+(t-e)*Math.random(),S=(e,t,n)=>P(e-n,t+n),R=(e,t)=>`hsla(${P(e-t,e+t)}, ${P(4,55)}%, ${P(30,80)}%, ${P(.2,.6)})`,T=({baseSize:e,baseHue:t,x:n,y:r})=>{const a=P(1.2*e,2*e),i=Math.round(.1*e),[o,s]=Array.isArray(n)?n:[n,n],[c,l]=Array.isArray(r)?r:[r,r];return{x:S(o-.5*a,s-.5*a,i),y:S(c-.5*a,l-.5*a,i),size:a,color:R(t,40),initialRotation:P(0,90),rotationSpeed:P(-.1,.1)}},A=e=>{const t=(0,r.useContext)(k),n=(0,r.useContext)(C);(0,r.useEffect)((()=>t&&e(n,t)),[n,t])};function F({...e}){const[t,n]=(0,r.useState)(0),a=(0,r.useRef)(null);return(0,r.useEffect)((()=>{a.current?.getContext("2d");const e=window.requestAnimationFrame((()=>n((e=>e+1))));return()=>{window.cancelAnimationFrame(e)}}),[t,n]),r.createElement("div",null,r.createElement(k.Provider,{value:a.current?.getContext("2d")},r.createElement(C.Provider,{value:t},r.createElement("canvas",_({ref:a},e)))))}function O({children:e=null}){return A(((e,t)=>{t.fillStyle="#000000",t.beginPath(),t.arc(t.canvas.width/2,t.canvas.height/2,t.canvas.height/2*Math.sin(.05*e)**2,0,2*Math.PI),t.fill()})),e}function I({children:e=null}){return e}function L({x:e,y:t,size:n,color:r,initialRotation:a,rotationSpeed:i,children:o=null}){return A(((o,s)=>{const c=a+i*o,l=.5*n;s.beginPath(),[30,90,150,210,270,330].forEach(((n,r)=>{const a=(n+c)*Math.PI/180,i={x:e+l+l*Math.cos(a),y:t+l+l*Math.sin(a)};0===r?s.moveTo(i.x,i.y):s.lineTo(i.x,i.y)})),s.fillStyle=r,s.fill()})),o}function z({children:e=null}){return A(((e,t)=>{t.clearRect(0,0,t.canvas.width,t.canvas.height)})),e}function W(){this.radius=10*Math.random()+5,this.x=this.radius+(400-2*this.radius)*Math.random(),this.y=-10,this.dx=20*(Math.random()-.5),this.dy=30,this.gravity=.5,this.friction=.54,this.update=function(e){var t=.15*e.canvas.height;this.y+this.radius+this.dy>=e.canvas.height-t?(this.dy=-this.dy*this.friction,this.dx*=this.friction,this.radius-=3,H.push(new Z(this))):this.dy+=this.gravity,(this.x+this.radius+this.dx>=e.canvas.width||this.x-this.radius+this.dx<0)&&(this.dx=-this.dx,this.dx*=this.friction,H.push(new Z(this))),this.x+=this.dx,this.y+=this.dy,this.draw(e);for(var n=0;n<H.length;n++)H[n].update(e)},this.draw=function(e){e.save(),e.beginPath(),e.arc(this.x,this.y,Math.abs(this.radius),0,2*Math.PI,!1),e.shadowColor="#E3EAEF",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillStyle="#E3EAEF",e.fill(),e.closePath(),e.restore()}}function j(e,t,n,r){this.x=e,this.y=t,this.size={width:2,height:2},this.dx=n,this.dy=r,this.gravity=.09,this.friction=.88,this.timeToLive=3,this.opacity=1,this.update=function(e){var t=.15*e.canvas.height;this.y+this.size.height+this.dy>=e.canvas.height-t?(this.dy=-this.dy*this.friction,this.dx*=this.friction):this.dy+=this.gravity,(this.x+this.size.width+this.dx>=e.canvas.width||this.x+this.dx<0)&&(this.dx=-this.dx,this.dx*=this.friction),this.x+=this.dx,this.y+=this.dy,this.draw(e),this.timeToLive-=.01,this.opacity-=1/(this.timeToLive/.01)},this.draw=function(e){e.save(),e.fillStyle="rgba(227, 234, 239,"+this.opacity+")",e.shadowColor="#E3EAEF",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillRect(this.x,this.y,this.size.width,this.size.height),e.restore()},this.isAlive=function(){return 0<=this.timeToLive}}function Z(e){this.particles=[],this.init=function(e){for(var t=0;t<8;t++){var n={x:5*(Math.random()-.5),y:15*(Math.random()-.5)};this.particles.push(new j(e.x,e.y,n.x,n.y))}},this.init(e),this.update=function(e){for(var t=0;t<this.particles.length;t++)this.particles[t].update(e),0==this.particles[t].isAlive()&&this.particles.splice(t,1)}}var D=[],H=[],Y=Math.floor(25*Math.random()+60);function U({children:e=null}){return A(((e,t)=>{for(var n=0;n<D.length;n++)D[n].update(t),D[n].radius<=0&&D.splice(n,1);for(n=0;n<H.length;n++)H[n].length<=0&&H.splice(n,1);e%Y==0&&(D.push(new W),Y=Math.floor(10*Math.random()+75))})),e}function X(){const[e,t]=(0,r.useState)(!1);return r.createElement("div",null,r.createElement(F,{width:"480",height:"270",style:{background:"#333"}},r.createElement(z,null),r.createElement(O,null),(({width:e,height:t})=>{const n=P(200,300),r=Math.min(e,t),a=[];for(let i=0;i<=Math.round(e/r);i++)for(let o=0;o<=Math.round(t/r);o++)a.push(T({baseSize:Math.max(e,t),x:i*e,y:o*t,baseHue:n}));const i=[...Array(5)].map((()=>T({baseSize:r,x:[0,e],y:[0,t],baseHue:n})));return[...a,...i]})({height:270,width:480}).map(((e,t)=>r.createElement(L,_({key:t},e)))),e&&r.createElement(I,null),r.createElement(U,null)))}var q=n(6037),N=n(3604),B=n(3986),V=n.n(B);function G(){const e=(0,r.useRef)(),t=(0,r.useRef)(),[n,a]=(0,r.useState)(null);(0,r.useEffect)((()=>{const t=e.current,n=new q.mh({canvas:t}),r=new q.jy({width:480,height:270});n.append(r);const a=new q.ZA;a.attr({pos:[240,100]}),n.append(a);const i=new q.__("Hello World !");i.attr({anchor:[.5,.5],font:"bold 48px Arial",fillColor:"#ffdc45"});const o=new q.__("SpriteJS.org");o.attr({anchor:[.5,.5],y:60,font:"bold 48px Arial",fillColor:"#ffdc45"}),a.animate([{scale:1.5,rotate:-30},{scale:1,rotate:0},{scale:1.5,rotate:30}],{duration:3e3,iterations:1/0,direction:"alternate"}),a.append(i,o)}),[]);const i=(0,r.useCallback)((()=>{n.stopRecord(),n.getStreamURL().then((e=>t.current.src=e)).catch((e=>console.error(e))),a(null)})),o=(0,r.useCallback)((()=>{const t=e.current,n=new N.p({canvas:t,outVideoType:"mp4",workerOptions:{corePath:"ffmpeg/ffmpeg-core.js",logger:console.info}});n.startRecord(),a(n)}));return r.createElement("div",null,r.createElement("canvas",{ref:e,width:"480",height:"270"}),r.createElement("div",null,n?r.createElement("button",{key:"stop",onClick:i},"Stop Recording"):r.createElement("button",{key:"start",onClick:o},"Start Recording")),r.createElement("video",{ref:t,width:"480",height:"270",controls:!0,autoPlay:!0}))}Object.assign(window,{FFmpeg:V()});var K=n(2524),$=n(9467),J=n(5505),Q=n(1629),ee=n(5219),te=n(8648),ne=n(1419),re=n(1090),ae=n(6446);const ie="\n                attribute vec3 position;\n                attribute vec3 normal;\n                attribute vec2 uv;\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n                uniform mat3 normalMatrix;\n                varying vec2 vUv;\n                varying vec3 vNormal;\n                void main() {\n                    vUv = uv;\n                    vNormal = normalize(normalMatrix * normal);\n                    \n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n            ",oe="\n                precision highp float;\n                uniform sampler2D tMap;\n                varying vec2 vUv;\n                varying vec3 vNormal;\n                void main() {\n                    vec3 normal = normalize(vNormal);\n                    float lighting = 0.2 * dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));\n                    vec3 tex = texture2D(tMap, vUv).rgb;\n                    gl_FragColor.rgb = tex + lighting + vec3(vUv - 0.5, 0.0) * 0.1;\n                    gl_FragColor.a = 1.0;\n                }\n            ";function se(){const e=(0,r.useRef)(),t=(0,r.useRef)();return(0,r.useEffect)((()=>{const n=e.current,r=new ne.T({canvas:n,width:n.width,height:n.height,dpr:2}),a=r.gl,i=new re.V(a,{fov:35});i.position.set(0,1,5),i.lookAt([0,0,0]);const o=new re.V(a,{fov:35});o.position.set(0,1,5),o.lookAt([0,0,0]),o.perspective({aspect:a.canvas.width/a.canvas.height});const s=new ae.w,{mesh:c,update:l}=function(e){const t=new K.x(e),n=new $.x(e,{image:new Uint8Array([191,25,54,255,96,18,54,255,96,18,54,255,37,13,53,255]),width:2,height:2,magFilter:e.NEAREST}),r=new J.$(e,{vertex:ie,fragment:oe,uniforms:{tMap:{value:n}}}),a=new Q.K(e,{geometry:t,program:r});return{mesh:a,update:e=>{a.rotation.y-=.02}}}(a),{mesh:u,target:h,update:d}=function(e){const t=new K.x(e),n=new ee.A(e,{width:512,height:512}),r=new J.$(e,{vertex:ie,fragment:oe,uniforms:{tMap:{value:n.texture}}}),a=new Q.K(e,{geometry:t,program:r});return{mesh:a,target:n,update:e=>{a.rotation.y-=.005,a.rotation.x-=.01}}}(a);u.setParent(s);const{mesh:m,update:v}=function(e){const t=new Float32Array(300),n=new Float32Array(400);for(let e=0;e<100;e++)t.set([Math.random(),Math.random(),Math.random()],3*e),n.set([Math.random(),Math.random(),Math.random(),Math.random()],4*e);const r=new te.Z(e,{position:{size:3,data:t},random:{size:4,data:n}}),a=new J.$(e,{vertex:"\n    attribute vec3 position;\n    attribute vec4 random;\n    uniform mat4 modelMatrix;\n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform float uTime;\n    varying vec4 vRandom;\n    void main() {\n        vRandom = random;\n        \n        // positions are 0->1, so make -1->1\n        vec3 pos = position * 2.0 - 1.0;\n        \n        // Scale towards camera to be more interesting\n        pos.z *= 10.0;\n        \n        // modelMatrix is one of the automatically attached uniforms when using the Mesh class\n        vec4 mPos = modelMatrix * vec4(pos, 1.0);\n        // add some movement in world space\n        float t = uTime * 0.6;\n        mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);\n        mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);\n        mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);\n        \n        // get the model view position so that we can scale the points off into the distance\n        vec4 mvPos = viewMatrix * mPos;\n        gl_PointSize = 300.0 / length(mvPos.xyz) * (random.x + 0.1);\n        gl_Position = projectionMatrix * mvPos;\n    }\n",fragment:"\n    precision highp float;\n    uniform float uTime;\n    varying vec4 vRandom;\n    void main() {\n        vec2 uv = gl_PointCoord.xy;\n        \n        float circle = smoothstep(0.5, 0.4, length(uv - 0.5)) * 0.8;\n        \n        gl_FragColor.rgb = 0.8 + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28) + vec3(0.1, 0.0, 0.3);\n        gl_FragColor.a = circle;\n    }\n",uniforms:{uTime:{value:0}},transparent:!0,depthTest:!1}),i=new Q.K(e,{mode:e.POINTS,geometry:r,program:a});return{mesh:i,update:e=>{i.rotation.x=.1*Math.sin(2e-4*e),i.rotation.y=.15*Math.cos(5e-4*e),i.rotation.z+=.01,a.uniforms.uTime.value=.001*e}}}(a);m.setParent(s);const{mesh:f,update:p}=function(e,{video:t}){const n=new K.x(e),r=new $.x(e),a=new J.$(e,{vertex:"\n    attribute vec2 uv;\n    attribute vec3 position;\n    attribute vec3 normal;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform mat3 normalMatrix;\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n        vUv = uv;\n        vNormal = normalize(normalMatrix * normal);\n        \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n",fragment:"\n    precision highp float;\n    uniform sampler2D tMap;\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n        vec3 normal = normalize(vNormal);\n        vec3 tex = texture2D(tMap, vUv).rgb;\n        \n        vec3 light = normalize(vec3(0.5, 1.0, -0.3));\n        float shading = dot(normal, light) * 0.15;\n        \n        gl_FragColor.rgb = tex + shading;\n        gl_FragColor.a = 1.0;\n    }\n",uniforms:{tMap:{value:r}}}),i=new Q.K(e,{geometry:n,program:a});return{mesh:i,program:a,update:e=>{t.readyState>=t.HAVE_ENOUGH_DATA&&(r.image||(r.image=t),r.needsUpdate=!0),i.rotation.y-=.04,i.rotation.x+=.03}}}(a,{video:t.current});f.setParent(s),requestAnimationFrame((function e(t){requestAnimationFrame(e),l(t),d(t),v(t),p(t),a.clearColor(.15,.05,.2,1),r.render({scene:c,camera:i,target:h}),a.clearColor(1,1,1,1),r.render({scene:s,camera:o})}))})),r.createElement("div",null,r.createElement("video",{ref:t,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0}),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}var ce=n(8826);function le(){return(le=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const ue=(0,r.createContext)(null);var he=["#FF1461","#18FF92","#5A87FF","#FBF38C"];function de(e){for(var t=0;t<e.animatables.length;t++)e.animatables[t].target.draw()}function me({video:e,children:t=null,...n}){const a=(0,r.useRef)();return(0,r.useEffect)((()=>{var t=a.current.getContext("2d");function n(e,n){var r={};return r.x=e,r.y=n,r.color=he[ce.Z.random(0,he.length-1)],r.radius=ce.Z.random(16,32),r.endPos=function(e){var t=ce.Z.random(0,360)*Math.PI/180,n=ce.Z.random(50,180),r=[-1,1][ce.Z.random(0,1)]*n;return{x:e.x+r*Math.cos(t),y:e.y+r*Math.sin(t)}}(r),r.draw=function(){t.beginPath(),t.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),t.fillStyle=r.color,t.fill()},r}(0,ce.Z)({duration:1/0,update:function(){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e.current,0,0,e.current.width,e.current.height)}});var r=t.canvas.width/2,i=t.canvas.height/2;!function e(){window.human||(function(e,r){for(var a=function(e,n){var r={};return r.x=e,r.y=n,r.color="#FFF",r.radius=.1,r.alpha=.5,r.lineWidth=6,r.draw=function(){t.globalAlpha=r.alpha,t.beginPath(),t.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),t.lineWidth=r.lineWidth,t.strokeStyle=r.color,t.stroke(),t.globalAlpha=1},r}(e,r),i=[],o=0;o<30;o++)i.push(n(e,r));ce.Z.timeline().add({targets:i,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:ce.Z.random(1200,1800),easing:"easeOutExpo",update:de}).add({targets:a,radius:ce.Z.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:ce.Z.random(600,800)},duration:ce.Z.random(1200,1800),easing:"easeOutExpo",update:de,offset:0})}(ce.Z.random(r-50,r+50),ce.Z.random(i-50,i+50)),(0,ce.Z)({duration:500}).finished.then(e))}()}),[a]),r.createElement(ue.Provider,{value:a.current?.getContext("2d")},r.createElement("canvas",le({ref:a},n)),t)}function ve(){const e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(me,{video:e,width:"480",height:"270"})))}var fe=n(5743),pe=n(9610),ge=n(3493),ye=n.n(ge),xe=n(3463),we=n.n(xe);function Ee(){return(Ee=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const be=(e,{refreshRate:t=60}={})=>{class n extends r.PureComponent{constructor(e){super(e),this.state={time:0,tick:0}}componentDidMount(){let e,n,r=1e3/t;n=-r;const a=t=>{this._r=ye()(a),e||(e=t),t-n>r&&(n=t,this.setState({time:t-e,tick:this.state.tick+1}))};this._r=ye()(a)}componentWillUnmount(){ye().cancel(this._r)}render(){return r.createElement(e,Ee({},this.props,this.state))}}return we()(n,e),n},Me=fe.Shaders.create({gradients:{frag:fe.GLSL`
precision highp float;
varying vec2 uv;
uniform vec4 colors[3];
uniform vec2 particles[3];
void main () {
  vec4 sum = vec4(0.0);
  for (int i=0; i<3; i++) {
    vec4 c = colors[i];
    vec2 p = particles[i];
    float d = c.a * smoothstep(0.6, 0.2, distance(p, uv));
    sum += d * vec4(c.a * c.rgb, c.a);
  }
  if (sum.a > 1.0) {
    sum.rgb /= sum.a;
    sum.a = 1.0;
  }
  gl_FragColor = vec4(sum.a * sum.rgb, 1.0);
}
`}}),_e=be((({time:e})=>r.createElement(fe.Node,{shader:Me.gradients,uniforms:{colors:[[Math.cos(.002*e),Math.sin(.002*e),.2,1],[Math.sin(.002*e),-Math.cos(.002*e),.1,1],[.3,Math.sin(3+.002*e),Math.cos(1+.003*e),1]],particles:[[.3,.3],[.7,.5],[.4,.9]]}})));function Ce(){return r.createElement(pe.T,{width:480,height:270},r.createElement(_e,null))}var ke=n(5066);const Pe=fe.Shaders.create({funky:{frag:fe.GLSL`
precision highp float;
varying vec2 uv;
uniform sampler2D t;
void main() {
  gl_FragColor = texture2D(t, uv) * vec4(
    0.5 + 0.5 * cos(uv.x * 30.0),
    0.5 + 0.5 * sin(uv.y * 20.0),
    0.7 + 0.3 * sin(uv.y * 8.0),
    1.0);
}
`}}),Se=({children:e})=>r.createElement(fe.Node,{shader:Pe.funky,uniforms:{t:e}});function Re(){return r.createElement(pe.T,{width:480,height:270,style:{background:'#fff url(\'data:image/svg+xml,        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill-opacity=".05" >          <rect x="100" width="100" height="100" />          <rect y="100" width="100" height="100" />        </svg>\')',backgroundSize:"5%"},webglContextAttributes:{premultipliedAlpha:!1}},r.createElement(Se,null,r.createElement(fe.LinearCopy,null,r.createElement(ke.Z,{width:400,height:200},{background:"rgba(0,0,0,.2)",size:[400,200],draws:[{textAlign:"center",fillStyle:"#fff",font:"48px bold Arial"},["fillText","Hello World\n2d canvas text\ninjected as texture",200,60,56]]}))))}function Te(){return(Te=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}const Ae=["#FF1461","#18FF92","#5A87FF","#FBF38C"];class Fe{color="";opacity=0;scaleX=1;x=0;y=0;w=0;h=0;constructor({x:e,y:t,w:n,h:r,color:a}){Object.assign(this,{x:e,y:t,w:n,h:r,color:a})}draw(e){const{width:t,height:n}=e.canvas,{x:r,y:a,w:i,h:o,color:s}=this,{scaleX:c,opacity:l}=this;e.save(),e.globalAlpha=l,e.fillStyle=s,e.fillRect((.8*r+.1)*t,(.8*a+.1)*n,.8*i*t*c,.8*o*n),e.restore()}}class Oe{color="";opacity=0;rotateZ=0;scale=1;size=30;text="";translateX=0;translateY=0;x=0;y=0;constructor({text:e,x:t,y:n,size:r,color:a}){Object.assign(this,{text:e,x:t,y:n,size:r,color:a})}draw(e){const{width:t,height:n}=e.canvas,{rotateZ:r,size:a,text:i,x:o,y:s,scale:c,color:l,opacity:u,translateX:h,translateY:d}=this,m=.8*a*n,v=e=>"string"==typeof e?(([e,t,n])=>({px:t,em:t*m}[n]))(e.match(/^([+-]?[-e0-9.]+)(px|em)$/)||[]):e;e.save(),e.globalAlpha=u,e.fillStyle=l,e.font=`${m}px Arial`,e.textAlign="start",e.textBaseline="alphabetic",e.beginPath(),e.rect(0,0,t,.75*n),e.clip();const{width:f}=e.measureText(i);e.translate((.8*o+.1)*t+f/2+v(h),(.8*(s+a/2)+.1)*n+v(d)),e.scale(c,c),e.rotate(r*Math.PI/180),e.fillText(i,-f/2,a/2*.8*n),e.restore()}}function Ie({video:e,children:t=null,...n}){const a=(0,r.useRef)();return(0,r.useEffect)((()=>{const t=a.current.getContext("2d"),n="Letters".split("").map(((e,t,n)=>new Oe({text:e,x:t/n.length,y:1/3,size:1/3,color:Ae[3]}))),r=[.3,.8].map(((e,t)=>new Fe({x:0,y:e,w:1,h:.02,color:Ae[t+1]})));(0,ce.Z)({duration:1/0,update:function(){t.clearRect(0,0,t.canvas.width,t.canvas.height),t.drawImage(e.current,0,0,e.current.width,e.current.height)}});const i=e=>{for(let n=0;n<e.animatables.length;n++)e.animatables[n].target.draw(t)};ce.Z.timeline({loop:!0}).add({targets:[...r],opacity:[0,1],scaleX:[0,1],duration:750,easing:"easeOutExpo",delay:(e,t,n)=>200*(n-t-1),update:i}).add({targets:[...n],opacity:1,rotateZ:[180,0],scale:1,translateY:["1.6em",0],translateX:[".8em",0],translateZ:0,duration:750,easing:"easeOutExpo",delay:(e,t)=>50*t,update:i},"-=950").add({targets:[...n,...r],opacity:0,duration:1e3,easing:"easeOutExpo",delay:1e3,update:i}).add({targets:[...r],opacity:[0,1],scaleX:[0,1],duration:600,easing:"easeOutExpo",delay:(e,t,n)=>200*(n-t-1),update:i}).add({targets:[...n],opacity:[0,1],rotateZ:0,scale:[.3,1],translateX:0,translateY:0,translateZ:0,duration:800,easing:"easeOutExpo",delay:(e,t)=>50*(t+1),update:i},"-=800").add({targets:[...n,...r],opacity:0,duration:1e3,easing:"easeOutExpo",delay:1e3})}),[a]),r.createElement("canvas",Te({ref:a},n))}function Le(){const e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(Ie,{video:e,width:"480",height:"270"})))}function ze(){const e=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,r.useRef)(null),i=(0,r.useRef)(null),o=(0,r.useCallback)((()=>{const n=t.current,r=i.current,o=e.current.getContext("2d"),s=a.current.getContext("2d");let c,l,u,h;o.clearRect(0,0,n.naturalWidth,n.naturalHeight),o.drawImage(n,0,0),c=o.getImageData(0,0,n.naturalWidth,n.naturalHeight),u=c.data,s.clearRect(0,0,r.naturalWidth,r.naturalHeight),s.drawImage(r,0,0),l=s.getImageData(0,0,r.naturalWidth,r.naturalHeight),h=l.data;for(var d=0,m=u.length;d<m;d+=4){var v,f,p,g,y,x,w,E;v=Math.floor(u[d]/4),f=Math.floor(u[d+1]/4),g=(p=Math.floor(u[d+2]/4))%8*64+v,x=h[y=4*((64*Math.floor(p/8)+f)*r.naturalWidth+g)],w=h[y+1],E=h[y+2],u[d]=x,u[d+1]=w,u[d+2]=E}o.clearRect(0,0,n.naturalWidth,n.naturalHeight),o.putImageData(c,0,0)}));return r.createElement("div",null,r.createElement("div",null,r.createElement("img",{ref:i,src:n(6751).Z,alt:"lut",width:"512",height:"512"})),r.createElement("div",null,r.createElement("img",{ref:t,src:"https://i.imgur.com/0bUSEBX.jpg",alt:"The Scream",crossOrigin:"Anonymous",width:"480",height:"270"})),r.createElement("div",null,r.createElement("button",{onClick:o},"Apply LUT")),r.createElement("canvas",{ref:e,width:"480",height:"270",style:{border:"1px solid #d3d3d3"}},"Your browser does not support the HTML5 canvas tag."),r.createElement("canvas",{ref:a,width:"512",height:"512",style:{border:"1px solid #d3d3d3"}},"Your browser does not support the HTML5 canvas tag."))}var We=n(2807),je=n(8182),Ze=n(4568);function De(){const e=(0,r.useRef)();return(0,r.useEffect)((()=>{const t=e.current,n=new ne.T({canvas:t,width:t.width,height:t.height,dpr:2,alpha:!0,premultipliedAlpha:!1}),r=n.gl,a=new ae.w,i=[];function o(e,t){const n=Math.random();return e*(1-n)+t*n}["#e09f7d","#ef5d60","#ec4067","#a01a7d","#311847"].forEach(((e,t)=>{const n={spring:o(.02,.1),friction:o(.7,.95),mouseVelocity:new We.A,mouseOffset:new We.A(.02*o(-1,1))},s=n.points=[];for(let e=0;e<20;e++)s.push(new We.A);n.polyline=new je.a(r,{points:s,vertex:"\n    precision highp float;\n    attribute vec3 position;\n    attribute vec3 next;\n    attribute vec3 prev;\n    attribute vec2 uv;\n    attribute float side;\n    uniform vec2 uResolution;\n    uniform float uDPR;\n    uniform float uThickness;\n    vec4 getPosition() {\n        vec4 current = vec4(position, 1);\n        vec2 aspect = vec2(uResolution.x / uResolution.y, 1);\n        vec2 nextScreen = next.xy * aspect;\n        vec2 prevScreen = prev.xy * aspect;\n    \n        // Calculate the tangent direction\n        vec2 tangent = normalize(nextScreen - prevScreen);\n    \n        // Rotate 90 degrees to get the normal\n        vec2 normal = vec2(-tangent.y, tangent.x);\n        normal /= aspect;\n        // Taper the line to be fatter in the middle, and skinny at the ends using the uv.y\n        normal *= mix(1.0, 0.1, pow(abs(uv.y - 0.5) * 2.0, 2.0) );\n        // When the points are on top of each other, shrink the line to avoid artifacts.\n        float dist = length(nextScreen - prevScreen);\n        normal *= smoothstep(0.0, 0.02, dist);\n        float pixelWidthRatio = 1.0 / (uResolution.y / uDPR);\n        float pixelWidth = current.w * pixelWidthRatio;\n        normal *= pixelWidth * uThickness;\n        current.xy -= normal * side;\n    \n        return current;\n    }\n    void main() {\n        gl_Position = getPosition();\n    }\n",uniforms:{uColor:{value:new Ze.I(e)},uThickness:{value:o(20,50)}}}),n.polyline.mesh.setParent(a),i.push(n)}));const s=new We.A;function c(e){e.changedTouches&&e.changedTouches.length&&(e.x=e.changedTouches[0].pageX,e.y=e.changedTouches[0].pageY),void 0===e.x&&(e.x=e.pageX,e.y=e.pageY),s.set(e.x/r.renderer.width*2-1,e.y/r.renderer.height*-2+1,0)}"ontouchstart"in window?(window.addEventListener("touchstart",c,!1),window.addEventListener("touchmove",c,!1)):window.addEventListener("mousemove",c,!1);const l=new We.A;requestAnimationFrame((function e(t){requestAnimationFrame(e),i.forEach((e=>{for(let t=e.points.length-1;t>=0;t--)t?e.points[t].lerp(e.points[t-1],.9):(l.copy(s).add(e.mouseOffset).sub(e.points[t]).multiply(e.spring),e.mouseVelocity.add(l).multiply(e.friction),e.points[t].add(e.mouseVelocity));e.polyline.updateGeometry()})),n.render({scene:a})}))})),r.createElement("div",null,r.createElement("canvas",{ref:e,width:"480",height:"270",style:{background:'#fff\n            url(\'data:image/svg+xml,           <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"         fill-opacity=".05" >                    <rect x="100" width="100" height="100" />                    <rect y="100" width="100" height="100" />                    </svg>\')',backgroundSize:"10%"}}))}function He(){const e=(0,r.useRef)(null),[t,n]=(0,r.useState)(null),a=(0,r.useCallback)((()=>navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"}}).then((t=>{const r=new MediaRecorder(t),a=[];r.addEventListener("dataavailable",(({data:e})=>a.push(e))),r.addEventListener("stop",(()=>{e.current.src=URL.createObjectURL(new Blob(a,{type:a[0].type})),n(null)})),r.start(),n({stream:t,record:r})})).catch(console.info))),i=(0,r.useCallback)((()=>{t.stream.getVideoTracks()[0].stop(),t.record.stop()}));return r.createElement("div",null,r.createElement("div",null,t?r.createElement("button",{key:"stop",onClick:i},"Stop Recording"):r.createElement("button",{key:"start",onClick:a},"Start Recording")),r.createElement("video",{ref:e,width:"480",height:"270",autoPlay:!0,controls:!0}))}function Ye(){const e=(0,r.useRef)();return(0,r.useEffect)((()=>{const t=e.current,n=new q.mh({canvas:t}),r=document.createElement("video");r.src="https://webrtc.github.io/samples/src/video/chrome.webm",r.crossOrigin="Anonymous",r.loop=!0,r.muted=!0,r.play();const a=t.cloneNode(),i=a.getContext("2d"),o=new q.jy({width:480,height:270});n.canvas.style.backgroundColor="#3f097a",n.append(o);const s=new q.ZA;s.attr({pos:[240,100]}),n.append(s);const c=new q.__("Hello World !");c.attr({anchor:[.5,.5],font:"bold 48px Arial",fillColor:"#ffdc45"});const l=new q.__("SpriteJS.org");l.attr({anchor:[.5,.5],y:60,font:"bold 48px Arial",fillColor:"#ffdc45"}),s.animate([{scale:1.5,rotate:-30},{scale:1,rotate:0},{scale:1.5,rotate:30}],{duration:3e3,iterations:1/0,direction:"alternate"}),s.append(c,l);let u=!1;r.addEventListener("playing",(()=>{u||(u=!0,n.tick(((...e)=>{i.drawImage(r,0,0),o.attr("texture",a)})))}))})),r.createElement("div",null,r.createElement("canvas",{ref:e,width:"480",height:"270"}))}function Ue(){const e=(0,r.useRef)(null);return(0,r.useEffect)((()=>{var t=[];var n=0,r=document.createElement("video");return r.addEventListener("loadeddata",(function(){e.current.innerHTML="",r.currentTime=n}),!1),r.addEventListener("seeked",(function(){var a,i,o=r.duration/4;i=(a=document.createElement("canvas")).getContext("2d"),a.width=480,a.height=270,i.drawImage(r,0,0,480,270),t.push(a),t.length,(n+=o)<=r.duration?r.currentTime=n:function(){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=480,n.height=270,e.current.appendChild(n),function(e){var n=0;!function r(){e.drawImage(t[n],0,0),n=(n+1)%t.length,setTimeout(r,500)}()}(r)}()}),!1),r.preload="auto",r.src="https://www.html5rocks.com/en/tutorials/video/basics/devstories.webm",()=>{}}),[e]),r.createElement("div",{ref:e})}var Xe=n(5278);function qe(){const[e,t]=(0,r.useState)(null),n=(0,r.useRef)(),a=(0,r.useCallback)((()=>n.current.requestPictureInPicture()));return(0,r.useEffect)((()=>{const e=n.current;console.log({video:e});const{readyState:r}=e;console.log({readyState:r});const a=(t,n)=>{console.log({now:t,metadata:n}),console.log(e.getVideoPlaybackQuality()),e.requestVideoFrameCallback(a)};e.requestVideoFrameCallback(a),e.addEventListener("error",(()=>{const{error:t}=e;console.log(["error"],{error:t})})),e.addEventListener("loadedmetadata",(()=>{const{currentTime:n,videoWidth:r,videoHeight:a,duration:i,readyState:o}=e;console.log(["loadedmetadata"],{currentTime:n,videoWidth:r,videoHeight:a,duration:i,readyState:o}),t((()=>({currentTime:n,duration:i})))})),e.addEventListener("seeked",(()=>{const{currentTime:t,playbackRate:n,seeking:r}=e;console.log(["seeked"],{currentTime:t,playbackRate:n,seeking:r})})),e.addEventListener("timeupdate",(()=>{const{currentTime:n,playbackRate:r,seeking:a}=e;console.log(["timeupdate"],{currentTime:n,playbackRate:r,seeking:a}),t((e=>({...e,currentTime:n})))}))}),[]),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:a},"pip"),e&&(({currentTime:e,duration:t})=>r.createElement("div",{className:Xe.Z.Duration},r.createElement("span",{className:Xe.Z.Progress,style:{width:100*e/t+"%"}}),e," / ",t))(e)),r.createElement("video",{ref:n,width:"480",height:"270",src:"https://webrtc.github.io/samples/src/video/chrome.webm",controls:!0}))}function Ne(){const[e,t]=(0,r.useState)(""),[a,i]=(0,r.useState)("Click Start to transcode"),o=(0,B.createFFmpeg)({corePath:"ffmpeg/ffmpeg-core.js",log:!0});return r.createElement("div",null,r.createElement("video",{src:e,width:"480",height:"270",controls:!0}),r.createElement("div",null,r.createElement("button",{onClick:async()=>{i("Loading ffmpeg-core.js"),await o.load(),i("Start transcoding"),o.FS("writeFile","test.avi",await(0,B.fetchFile)(n(2444).Z)),await o.run("-i","test.avi","test.mp4"),i("Complete transcoding");const e=o.FS("readFile","test.mp4");t(URL.createObjectURL(new Blob([e.buffer],{type:"video/mp4"})))}},"Transcode")),r.createElement("div",null,a))}var Be=n(7257),Ve=n(2685),Ge=n.n(Ve);const Ke="wxqlQkh,G2Whuq3,0bUSEBX,giP58XN,iKdXwVm,IvpoR40,zJIxPEo,CKlmtPs,fnMylHI,vGXYiYy,MnOB9Le,YqsZKgc,0BJobQo,Otbz312".split(",").map((e=>`https://i.imgur.com/${e}.jpg`)),$e=be((({slides:e,delay:t,duration:n,time:a})=>{const i=Math.floor(a/(t+n)),o=e[i%e.length],s=e[(i+1)%e.length],c=Ge()[i%Ge().length],l=(a-i*(t+n)-t)/n;return l>0?r.createElement(Be.Z,{from:o,to:s,progress:l,transition:c}):r.createElement(fe.LinearCopy,null,o)}));function Je(){return r.createElement(pe.T,{width:480,height:270},r.createElement($e,{slides:Ke,delay:2e3,duration:1500}))}var Qe=n(9326);const et=Object.freeze({GRAY_SCALE:"GRAY_SCALE",CHROMA_KEY:"CHROMA_KEY"}),tt=["https://webrtc.github.io/samples/src/video/chrome.webm","https://mdn.github.io/dom-examples/canvas/chroma-keying/media/video.mp4"];function nt({counter:e}){const[t,n]=(0,r.useState)([]),[a,i]=(0,r.useState)(Object.keys(et)[0]),[o,s]=(0,r.useState)(tt[0]),c=(0,r.useRef)(),l=(0,r.useRef)(),u=(0,r.useRef)(),h=(0,r.useRef)(),d=(0,r.useRef)(e);return(0,r.useEffect)((()=>{d.current=e}),[e]),(0,r.useEffect)((()=>{const e=l.current.getContext("2d"),t=(t,n,r,a="left")=>{e.font="30px Sans-serif",e.textAlign=a,e.strokeStyle="black",e.lineWidth=4,e.strokeText(t,n,r),e.fillStyle="white",e.fillText(t,n,r)},r=()=>{if(c.current.ended||c.current.paused)return;e.drawImage(c.current,0,0,c.current.width,c.current.height);const n=e.getImageData(0,0,l.current.width,l.current.height),{data:i}=n;for(let e=0;e<i.length;e+=4){const t=i[e],n=i[e+1],r=i[e+2];if(a===et.GRAY_SCALE){var o=(t+n+r)/3;i[e]=o,i[e+1]=o,i[e+2]=o}else a===et.CHROMA_KEY&&n>100&&t>100&&r<43&&(i[e+3]=0)}e.putImageData(n,0,0,0,0,c.current.width,c.current.height),t(d.current,10,40),t(c.current.currentTime,470,250,"right"),c.current.requestVideoFrameCallback(r)},i=()=>{c.current.requestVideoFrameCallback(r)};return c.current.addEventListener("play",i,!1),c.current.addEventListener("loadedmetadata",(()=>{const{videoWidth:e,videoHeight:t,duration:r}=c.current;console.log(["loadedmetadata"],{videoWidth:e,videoHeight:t,duration:r}),n([...Array(Math.floor(r))].map(((e,t)=>t)))})),c.current.addEventListener("timeupdate",(()=>{const{currentTime:e}=c.current;console.log(["timeupdate"],{currentTime:e})})),()=>{c.current.removeEventListener("play",i)}}),[c,l,o,a]),r.createElement("div",null,r.createElement("div",null,r.createElement("select",{value:o,onChange:e=>s(e.target.value)},tt.map(((e,t)=>r.createElement("option",{key:t,value:e},e))))),r.createElement("video",{ref:c,src:o,width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0}),r.createElement("div",null,r.createElement("select",{value:a,onChange:e=>i(e.target.value)},Object.entries(et).map((([e,t],n)=>r.createElement("option",{key:n,value:e},t))))),r.createElement("div",null,r.createElement("canvas",{ref:l,className:Qe.Z.Canvas,width:"480",height:"270"})),r.createElement("div",null,r.createElement("select",{onChange:e=>c.current.currentTime=e.target.value},t.map(((e,t)=>r.createElement("option",{key:t,value:e},e)))),r.createElement("button",{onClick:()=>(h.current.setAttribute("href",l.current.toDataURL()),h.current.setAttribute("download","thumbnail.png"),void u.current.setAttribute("src",l.current.toDataURL()))},"capture")," ",r.createElement("a",{ref:h,href:"#"},"download")),r.createElement("div",null,r.createElement("img",{ref:u,className:Qe.Z.Image,width:"480",height:"270",alt:"",onClick:e=>window.open(e.target.getAttribute("src"))})))}var rt=n(4286),at=n.n(rt);const it={title:"Monochrome",description:"Change images to a single chroma (e.g can be used to make a black & white filter). Input color mix and output color mix can be adjusted.",vertexShader:"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n      void main() {\n          gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n          v_texCoord = a_texCoord;\n      }",fragmentShader:"\n      precision mediump float;\n      uniform sampler2D u_image;\n      uniform vec3 inputMix;\n      uniform vec3 outputMix;\n      varying vec2 v_texCoord;\n      varying float v_mix;\n      void main(){\n          vec4 color = texture2D(u_image, v_texCoord);\n          float mono = color[0]*inputMix[0] + color[1]*inputMix[1] + color[2]*inputMix[2];\n          color[0] = mono * outputMix[0];\n          color[1] = mono * outputMix[1];\n          color[2] = mono * outputMix[2];\n          gl_FragColor = color;\n      }",properties:{inputMix:{type:"uniform",value:[.4,.6,.2]},outputMix:{type:"uniform",value:[1,1,1]}},inputs:["u_image"]};function ot(){const e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useCallback)((e=>{t.current.state===at().STATE.PLAYING?t.current.pause():(t.current.currentTime=0,t.current.play())}));return(0,r.useEffect)((()=>{const n=e.current,r=new(at())(n),a=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4");a.start(0),a.stop(60);const i=r.effect(it);i.outputMix=[1.25,1.18,.9],a.connect(i),i.connect(r.destination),t.current=r})),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:n},"Play / Pause")),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}const st={title:"Cross-Fade",description:"A cross-fade effect. Typically used as a transistion.",vertexShader:"\n          attribute vec2 a_position;\n          attribute vec2 a_texCoord;\n          varying vec2 v_texCoord;\n          void main() {\n              gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n              v_texCoord = a_texCoord;\n          }",fragmentShader:"\n          precision mediump float;\n          uniform sampler2D u_image_a;\n          uniform sampler2D u_image_b;\n          uniform float mix;\n          varying vec2 v_texCoord;\n          varying float v_mix;\n          void main(){\n              vec4 color_a = texture2D(u_image_a, v_texCoord);\n              vec4 color_b = texture2D(u_image_b, v_texCoord);\n              color_a[0] *= mix;\n              color_a[1] *= mix;\n              color_a[2] *= mix;\n              color_a[3] *= mix;\n              color_b[0] *= (1.0 - mix);\n              color_b[1] *= (1.0 - mix);\n              color_b[2] *= (1.0 - mix);\n              color_b[3] *= (1.0 - mix);\n              gl_FragColor = color_a + color_b;\n          }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]};function ct(){const e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useCallback)((e=>{t.current.state===at().STATE.PLAYING?t.current.pause():t.current.play()}));return(0,r.useEffect)((()=>{const n=e.current,r=new(at())(n),a=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4");a.start(0),a.stop(4);const i=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4");i.start(2),i.stop(6);const o=r.transition(st);o.transition(2,4,0,1,"mix"),a.connect(o),i.connect(o),o.connect(r.destination),t.current=r})),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:n},"Play / Pause")),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}function lt(){return r.createElement("div",null,r.createElement(ot,null),r.createElement(ct,null))}var ut=n(7038);function ht(){const e=(0,r.useRef)();return(0,r.useEffect)((()=>{const t=e.current;(0,ut.MediaPlayer)().create().initialize(t,"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",!1)}),[]),r.createElement("div",null,r.createElement("video",{ref:e,width:"480",height:"270",controls:!0}))}function dt(){return(dt=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e}).apply(this,arguments)}class mt extends r.Component{componentDidMount(){const e=()=>{this._raf=ye()(e);const{video:t}=this.refs;if(!t)return;const n=t.currentTime;n!==this.currentTime&&(this.currentTime=n,this.props.onFrame(n))};this._raf=ye()(e)}componentWillUnmount(){ye().cancel(this._raf)}render(){const{onFrame:e,...t}=this.props;return r.createElement("video",dt({},t,{ref:"video"}))}}const vt=fe.Shaders.create({SplitColor:{frag:fe.GLSL`
precision highp float;
varying vec2 uv;
uniform sampler2D children;
void main () {
  float y = uv.y * 3.0;
  vec4 c = texture2D(children, vec2(uv.x, mod(y, 1.0)));
  gl_FragColor = vec4(
    c.r * step(2.0, y) * step(y, 3.0),
    c.g * step(1.0, y) * step(y, 2.0),
    c.b * step(0.0, y) * step(y, 1.0),
    1.0);
}
`}}),ft=({children:e})=>r.createElement(fe.Node,{shader:vt.SplitColor,uniforms:{children:e}}),pt="wxqlQkh,G2Whuq3,0bUSEBX,giP58XN,iKdXwVm,IvpoR40,zJIxPEo,CKlmtPs,fnMylHI,vGXYiYy,MnOB9Le,YqsZKgc,0BJobQo,Otbz312".split(",").map((e=>`https://i.imgur.com/${e}.jpg`)),gt=be((({video1Ref:e,video2Ref:t,slides:n,delay:a,duration:i,time:o})=>{const s=[e,t].map((({current:e})=>e.readyState>=e.HAVE_ENOUGH_DATA?e:null)),c=Math.floor(o/(a+i)),l=s[c%s.length]||n[c%n.length],u=s[(c+1)%s.length]||n[(c+1)%n.length],h=Ge()[c%Ge().length],d=(o-c*(a+i)-a)/i;return d>0?r.createElement(Be.Z,{from:l,to:u,progress:d,transition:h}):r.createElement(fe.LinearCopy,null,l)})),yt=()=>{const e=(0,r.useRef)(),t=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement(pe.T,{width:480,height:270},r.createElement(gt,{slides:pt,delay:2e3,duration:1500,video1Ref:e,video2Ref:t})),r.createElement("div",null,r.createElement("video",{ref:t,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement(pe.T,{width:480,height:810,pixelRatio:1},r.createElement(ft,null,(e=>r.createElement(mt,{onFrame:e,autoPlay:!0,loop:!0,crossOrigin:"anonymous",src:"https://webrtc.github.io/samples/src/video/chrome.webm"})))))};function xt(){const e=(0,a.v9)((({counter:e})=>e)),t=(0,a.I0)();return r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:()=>t((0,i.n)())},e)),r.createElement(qe,null),r.createElement(ht,null),r.createElement(G,null),r.createElement(yt,null),r.createElement(Re,null),r.createElement(se,null),r.createElement(De,null),r.createElement(Ye,null),r.createElement(Le,null),r.createElement(M,null),r.createElement(ve,null),r.createElement(v,null),r.createElement(X,null),r.createElement(lt,null),r.createElement(Ne,null),r.createElement(ze,null),r.createElement(He,null),r.createElement(nt,{counter:e}),r.createElement(Ce,null),r.createElement(Ue,null),r.createElement(Je,null))}},1162:(e,t,n)=>{n.r(t),n.d(t,{default:()=>u});var r=n(2609),a=n.n(r),i=n(8991),o=n.n(i),s=new URL(n(7658),n.b),c=a()((function(e){return e[1]})),l=o()(s);c.push([e.id,"._68UbMvsLMym9HWAqeGa,.zZ455sJ_WDDcf_jzbLJl{background:#fff url("+l+");background-size:5%}",""]),c.locals={Canvas:"_68UbMvsLMym9HWAqeGa",Image:"zZ455sJ_WDDcf_jzbLJl"};const u=c},6751:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"3b113b09127085b482f0fa255f75f50b.png"},2444:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"fc6c3033c539a87e55dfe5d7ca097c10.avi"},9326:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(6062),a=n.n(r),i=n(4036),o=n.n(i),s=n(6793),c=n.n(s),l=n(7892),u=n.n(l),h=n(1173),d=n.n(h),m=n(2464),v=n.n(m),f=n(1162),p={};p.styleTagTransform=v(),p.setAttributes=u(),p.insert=c().bind(null,"head"),p.domAPI=o(),p.insertStyleElement=d();var g=a()(f.default,p);if(!f.default.locals||e.hot.invalidate){var y=!f.default.locals,x=y?f:f.default.locals;e.hot.accept(1162,(t=>{f=n(1162),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(x,y?f:f.default.locals,y)?(x=y?f:f.default.locals,g(f.default)):e.hot.invalidate()}))}e.hot.dispose((function(){g()}));const w=f.default&&f.default.locals?f.default.locals:void 0},7658:e=>{e.exports='data:image/svg+xml,   <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"         fill-opacity=".05" >            <rect x="100" width="100" height="100" />            <rect y="100" width="100" height="100" />            </svg>'}}]);