"use strict";(self.webpackChunk_dev_web=self.webpackChunk_dev_web||[]).push([[773],{12773:(e,t,n)=>{n.r(t),n.d(t,{default:()=>xn});var r=n(2784),a=n(26151),o=n(17876),i=["time","children"];function c(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(){return l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},l.apply(this,arguments)}var u=(0,r.createContext)(null),s=(0,r.createContext)(0);function f(e){var t,n=e.time,a=e.children,o=void 0===a?null:a,c=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,i),f=(0,r.useRef)();return r.createElement(u.Provider,{value:null===(t=f.current)||void 0===t?void 0:t.getContext("2d")},r.createElement(s.Provider,{value:n},r.createElement("canvas",l({ref:f},c)),o))}function h(e){var t=e.video,n=e.children,a=void 0===n?null:n,o=(0,r.useContext)(u);return o&&o.drawImage(t.current,0,0,t.current.width,t.current.height),a}function d(e){var t=e.children,n=void 0===t?null:t,a=(0,r.useContext)(u);if((0,r.useContext)(s),a){for(var o=a.getImageData(0,0,a.canvas.width,a.canvas.height),i=o.data,c=0;c<i.length;c+=4){var l=(i[c]+i[c+1]+i[c+2])/3;i[c]=l,i[c+1]=l,i[c+2]=l}a.putImageData(o,0,0,0,0,a.canvas.width,a.canvas.height)}return n}function m(e){var t=e.children,n=void 0===t?null:t,a=(0,r.useContext)(u),o=(0,r.useContext)(s);return a&&(a.fillStyle="#000000",a.beginPath(),a.arc(a.canvas.width/2,a.canvas.height/2,a.canvas.height/2*Math.pow(Math.sin(2*o),2),0,2*Math.PI),a.fill()),n}function v(e){var t=e.children,n=void 0===t?null:t,a=(0,r.useContext)(u),o=(0,r.useContext)(s);return a&&function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left";a.font="30px Sans-serif",a.textAlign=r,a.strokeStyle="black",a.lineWidth=4,a.strokeText(e,t,n),a.fillStyle="white",a.fillText(e,t,n)}(o,470,250,"right"),n}function p(){var e,t,n=(e=(0,r.useState)(0),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return c(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?c(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),a=n[0],o=n[1],i="https://webrtc.github.io/samples/src/video/chrome.webm",l=(0,r.useRef)();return(0,r.useEffect)((function(){var e=function e(){l.current.ended||l.current.paused||(o(l.current.currentTime),l.current.requestVideoFrameCallback(e))},t=function(){l.current.requestVideoFrameCallback(e)};return l.current.addEventListener("play",t,!0),l.current.addEventListener("loadedmetadata",(function(){var e=l.current,t=e.videoWidth,n=e.videoHeight,r=e.duration;console.log(["loadedmetadata"],{videoWidth:t,videoHeight:n,duration:r})})),l.current.addEventListener("timeupdate",(function(){var e=l.current.currentTime;console.log(["timeupdate"],{currentTime:e})})),function(){l.current.removeEventListener("play",t)}}),[l,i]),r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:l,src:i,width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(f,{width:"480",height:"270",time:a},r.createElement(h,{video:l}),r.createElement(d,null),r.createElement(m,null),r.createElement(v,null))))}var y=n(53328),g=n.n(y),b=["video","children"];function w(){return w=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},w.apply(this,arguments)}function x(e){return x="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},x(e)}function E(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return S(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?S(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function S(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function O(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function P(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function k(e,t,n){return t&&P(e.prototype,t),n&&P(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}var M=["#FF1461","#18FF92","#5A87FF","#FBF38C"];function A(e){return e<.5?4*e*e*e:1-Math.pow(-2*e+2,3)/2}var _=function(){function e(){O(this,e),this.points=[]}return k(e,[{key:"init",value:function(){for(var e=0;e<this.numPoints;e++){var t=new C(this.divisional*(e+1),this);this.push(t)}}},{key:"render",value:function(e){var t=this.canvas,n=this.ctx,r=this.points,a=this.numPoints,o=this.center,i=this.video;if(n.clearRect(0,0,t.width,t.height),n.drawImage(i,0,0,i.width,i.height),n.lineWidth=2,n.strokeStyle=M[1],n.strokeRect(20,20,20,20),e){var c=e/6%360,l=Math.min(Math.abs((c-180)/180),1);n.save(),n.translate(85,40+20*A(l)),n.beginPath(),[30,90,150,210,270,330,30].forEach((function(e,t){var r=(e+180*A(l))*Math.PI/180;n[t?"lineTo":"moveTo"](10*Math.cos(r),10*Math.sin(r))})),n.strokeStyle=M[0],n.stroke(),n.restore()}if(e){var u=e/2%360;n.save(),n.translate(30,95),n.rotate(u*Math.PI/180),n.translate(-30,-95),n.lineWidth=2,n.beginPath(),n.moveTo(10,90),n.lineTo(20,100),n.lineTo(30,90),n.lineTo(40,100),n.lineTo(50,90),n.strokeStyle=M[1],n.stroke(),n.restore()}if(e){var s=e/4%180;n.translate(60,65),n.scale(1-Math.sin(s*Math.PI/180)/2,1-Math.sin(s*Math.PI/180)/2),n.translate(-60,-65),n.lineWidth=3,n.beginPath(),n.arc(60,65,15,0,2*Math.PI,!0),n.strokeStyle=M[2],n.stroke(),n.restore(),n.setTransform(1,0,0,1,0,0)}if(e){var f=-e/5%360,h=-e/7%360;n.lineWidth=5,n.beginPath(),n.arc(75,100,10,f*Math.PI/180,f*Math.PI/180+1.5*Math.PI+Math.sin(h*Math.PI/180),!1),n.strokeStyle=M[3],n.stroke()}if(n.beginPath(),n.arc(60,165,15,0,2*Math.PI,!0),n.fillStyle=M[0],n.fill(),e){var d=e/5%180;n.lineWidth=2+2*Math.sin(d*Math.PI/180),n.beginPath(),n.arc(70,130,5,0,Math.PI,!1),n.arc(60,130,5,0,Math.PI,!0),n.arc(50,130,5,0,Math.PI,!1),n.arc(40,130,5,0,Math.PI,!0),n.arc(30,130,5,0,Math.PI,!1),n.arc(20,130,5,0,Math.PI,!0),n.strokeStyle=M[3],n.stroke()}if(e){var m=[[-1,0],[-.5,.5],[.5,-.5],[1,0]],v=[0,0,0,1,2,2,2],p=e/6%360/360,y=E(g()(p%1,2,m,v),2),b=y[0],w=y[1];n.translate(50,200+40*w),n.rotate(b*Math.PI),n.lineWidth=3,n.beginPath(),n.moveTo(-10,0),n.lineTo(10,0),n.moveTo(0,-10),n.lineTo(0,10),n.strokeStyle=M[2],n.stroke(),n.restore(),n.setTransform(1,0,0,1,0,0),n.lineWidth=1;for(var x=0;x<p;x+=.01){var S=E(g()(x%1,2,m,v),2),O=S[0],P=S[1];n.strokeStyle=M[0],n.strokeRect(50+40*O,200+40*P,1,1),n.strokeStyle=M[1],n.strokeRect(10+40*x,200+40*O,1,1)}}var k=new Path2D;k.rect(10,10,20,20);var _=new Path2D;_.arc(70,15,15,0,2*Math.PI),n.strokeStyle=M[3],n.stroke(k),n.fillStyle=M[2],n.fill(_);var C=new Path2D("M5 60 l 15 10 l 5 -15 l 15 10");n.strokeStyle=M[0],n.stroke(C),r[0].solveWith(r[a-1],r[1]);var j=r[a-1].position,T=r[0].position,R=T;n.beginPath(),n.moveTo(o.x,o.y),n.moveTo((j.x+T.x)/2,(j.y+T.y)/2);for(var I=1;I<a;I++){r[I].solveWith(r[I-1],r[I+1]||r[0]);var F=r[I].position,L=(T.x+F.x)/2,z=(T.y+F.y)/2;n.quadraticCurveTo(T.x,T.y,L,z),n.fillStyle="#000000",T=F}var D=(T.x+R.x)/2,W=(T.y+R.y)/2;n.quadraticCurveTo(T.x,T.y,D,W),n.fillStyle=this.color,n.fill(),n.strokeStyle="#000000",requestAnimationFrame(this.render.bind(this))}},{key:"push",value:function(e){e instanceof C&&this.points.push(e)}},{key:"color",get:function(){return this._color||"#000000"},set:function(e){this._color=e}},{key:"canvas",get:function(){return this._canvas},set:function(e){e instanceof HTMLElement&&"canvas"===e.tagName.toLowerCase()&&(this._canvas=e,this.ctx=this._canvas.getContext("2d"))}},{key:"numPoints",get:function(){return this._points||32},set:function(e){e>2&&(this._points=e)}},{key:"radius",get:function(){return this._radius||150},set:function(e){e>0&&(this._radius=e)}},{key:"position",get:function(){return this._position||{x:.5,y:.5}},set:function(e){"object"==x(e)&&e.x&&e.y&&(this._position=e)}},{key:"divisional",get:function(){return 2*Math.PI/this.numPoints}},{key:"center",get:function(){return{x:this.canvas.width*this.position.x,y:this.canvas.height*this.position.y}}},{key:"running",get:function(){return!1!==this.running},set:function(e){this._running=!0===e}}]),e}(),C=function(){function e(t,n){O(this,e),this.parent=n,this.azimuth=Math.PI-t,this._components={x:Math.cos(this.azimuth),y:Math.sin(this.azimuth)},this.acceleration=.6*Math.random()-.3}return k(e,[{key:"solveWith",value:function(e,t){this.acceleration=(-.3*this.radialEffect+(e.radialEffect-this.radialEffect)+(t.radialEffect-this.radialEffect))*this.elasticity-this.speed*this.friction}},{key:"acceleration",get:function(){return this._acceleration||0},set:function(e){"number"==typeof e&&(this._acceleration=e,this.speed+=2*this._acceleration)}},{key:"speed",get:function(){return this._speed||0},set:function(e){"number"==typeof e&&(this._speed=e,this.radialEffect+=5*this._speed)}},{key:"radialEffect",get:function(){return this._radialEffect||0},set:function(e){"number"==typeof e&&(this._radialEffect=e)}},{key:"position",get:function(){return{x:this.parent.center.x+this.components.x*(this.parent.radius+this.radialEffect),y:this.parent.center.y+this.components.y*(this.parent.radius+this.radialEffect)}}},{key:"components",get:function(){return this._components}},{key:"elasticity",get:function(){return this._elasticity||.001},set:function(e){"number"==typeof e&&(this._elasticity=e)}},{key:"friction",get:function(){return this._friction||.0085},set:function(e){"number"==typeof e&&(this._friction=e)}}]),e}();function j(e){var t=e.video,n=(e.children,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,b)),a=(0,r.useRef)();return(0,r.useEffect)((function(){var e=new _;!function(){a.current.setAttribute("touch-action","none");var n={x:0,y:0},r=!1;window.addEventListener("pointermove",(function(t){var o=a.current.getBoundingClientRect(),i=o.x,c=o.y,l=e.center.x+i,u=e.center.y+c,s=t.clientX-l,f=t.clientY-u,h=Math.sqrt(s*s+f*f),d=null;if(e.mousePos={x:l-t.clientX,y:u-t.clientY},h<e.radius&&!1===r){var m={x:t.clientX-l,y:t.clientY-u};d=Math.atan2(m.y,m.x),r=!0}else if(h>e.radius&&!0===r){var v={x:t.clientX-l,y:t.clientY-u};d=Math.atan2(v.y,v.x),r=!1,e.color=null}if("number"==typeof d){var p=null,y=100;if(e.points.forEach((function(e){Math.abs(d-e.azimuth)<y&&(p=e,y=Math.abs(d-e.azimuth))})),p){var g={x:n.x-t.clientX,y:n.y-t.clientY};(g=10*Math.sqrt(g.x*g.x+g.y*g.y))>100&&(g=100),p.acceleration=g/100*(r?-1:1)}}n.x=t.clientX,n.y=t.clientY})),e.canvas=a.current,e.video=t.current,e.init(),e.render()}()}),[a]),r.createElement("canvas",w({ref:a},n))}function T(){var e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(j,{video:e,width:"480",height:"270"})))}function R(){return R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},R.apply(this,arguments)}function I(e){return function(e){if(Array.isArray(e))return z(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||L(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function F(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||L(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function L(e,t){if(e){if("string"==typeof e)return z(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?z(e,t):void 0}}function z(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var D=(0,r.createContext)(0),W=(0,r.createContext)(null),Z=function(e,t){return e+(t-e)*Math.random()},U=function(e,t,n){return Z(e-n,t+n)},Y=function(e,t){var n=Z(e-t,e+t),r=Z(4,55);return"hsla(".concat(n,", ").concat(r,"%, ").concat(Z(30,80),"%, ").concat(Z(.2,.6),")")},H=function(e){var t=e.baseSize,n=e.baseHue,r=e.x,a=e.y,o=Z(1.2*t,2*t),i=Math.round(.1*t),c=F(Array.isArray(r)?r:[r,r],2),l=c[0],u=c[1],s=F(Array.isArray(a)?a:[a,a],2),f=s[0],h=s[1];return{x:U(l-.5*o,u-.5*o,i),y:U(f-.5*o,h-.5*o,i),size:o,color:Y(n,40),initialRotation:Z(0,90),rotationSpeed:Z(-.1,.1)}},X=function(e){var t=(0,r.useContext)(W),n=(0,r.useContext)(D);(0,r.useEffect)((function(){return t&&e(n,t)}),[n,t])};function q(e){var t,n=R({},e),a=F((0,r.useState)(0),2),o=a[0],i=a[1],c=(0,r.useRef)(null);return(0,r.useEffect)((function(){null===(e=c.current)||void 0===e||e.getContext("2d");var e,t=window.requestAnimationFrame((function(){return i((function(e){return e+1}))}));return function(){window.cancelAnimationFrame(t)}}),[o,i]),r.createElement("div",null,r.createElement(W.Provider,{value:null===(t=c.current)||void 0===t?void 0:t.getContext("2d")},r.createElement(D.Provider,{value:o},r.createElement("canvas",R({ref:c},n)))))}function N(e){var t=e.children,n=void 0===t?null:t;return X((function(e,t){t.fillStyle="#000000",t.beginPath(),t.arc(t.canvas.width/2,t.canvas.height/2,t.canvas.height/2*Math.pow(Math.sin(.05*e),2),0,2*Math.PI),t.fill()})),n}function B(e){var t=e.children;return void 0===t?null:t}function V(e){var t=e.x,n=e.y,r=e.size,a=e.color,o=e.initialRotation,i=e.rotationSpeed,c=e.children,l=void 0===c?null:c;return X((function(e,c){var l=o+i*e,u=.5*r;c.beginPath(),[30,90,150,210,270,330].forEach((function(e,r){var a=(e+l)*Math.PI/180,o={x:t+u+u*Math.cos(a),y:n+u+u*Math.sin(a)};0===r?c.moveTo(o.x,o.y):c.lineTo(o.x,o.y)})),c.fillStyle=a,c.fill()})),l}function G(e){var t=e.children,n=void 0===t?null:t;return X((function(e,t){t.clearRect(0,0,t.canvas.width,t.canvas.height)})),n}function $(){this.radius=10*Math.random()+5,this.x=this.radius+(400-2*this.radius)*Math.random(),this.y=-10,this.dx=20*(Math.random()-.5),this.dy=30,this.gravity=.5,this.friction=.54,this.update=function(e){var t=.15*e.canvas.height;this.y+this.radius+this.dy>=e.canvas.height-t?(this.dy=-this.dy*this.friction,this.dx*=this.friction,this.radius-=3,ee.push(new Q(this))):this.dy+=this.gravity,(this.x+this.radius+this.dx>=e.canvas.width||this.x-this.radius+this.dx<0)&&(this.dx=-this.dx,this.dx*=this.friction,ee.push(new Q(this))),this.x+=this.dx,this.y+=this.dy,this.draw(e);for(var n=0;n<ee.length;n++)ee[n].update(e)},this.draw=function(e){e.save(),e.beginPath(),e.arc(this.x,this.y,Math.abs(this.radius),0,2*Math.PI,!1),e.shadowColor="#E3EAEF",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillStyle="#E3EAEF",e.fill(),e.closePath(),e.restore()}}function K(e,t,n,r){this.x=e,this.y=t,this.size={width:2,height:2},this.dx=n,this.dy=r,this.gravity=.09,this.friction=.88,this.timeToLive=3,this.opacity=1,this.update=function(e){var t=.15*e.canvas.height;this.y+this.size.height+this.dy>=e.canvas.height-t?(this.dy=-this.dy*this.friction,this.dx*=this.friction):this.dy+=this.gravity,(this.x+this.size.width+this.dx>=e.canvas.width||this.x+this.dx<0)&&(this.dx=-this.dx,this.dx*=this.friction),this.x+=this.dx,this.y+=this.dy,this.draw(e),this.timeToLive-=.01,this.opacity-=1/(this.timeToLive/.01)},this.draw=function(e){e.save(),e.fillStyle="rgba(227, 234, 239,"+this.opacity+")",e.shadowColor="#E3EAEF",e.shadowBlur=20,e.shadowOffsetX=0,e.shadowOffsetY=0,e.fillRect(this.x,this.y,this.size.width,this.size.height),e.restore()},this.isAlive=function(){return 0<=this.timeToLive}}function Q(e){this.particles=[],this.init=function(e){for(var t=0;t<8;t++){var n={x:5*(Math.random()-.5),y:15*(Math.random()-.5)};this.particles.push(new K(e.x,e.y,n.x,n.y))}},this.init(e),this.update=function(e){for(var t=0;t<this.particles.length;t++)this.particles[t].update(e),0==this.particles[t].isAlive()&&this.particles.splice(t,1)}}var J=[],ee=[],te=Math.floor(25*Math.random()+60);function ne(e){var t=e.children,n=void 0===t?null:t;return X((function(e,t){for(var n=0;n<J.length;n++)J[n].update(t),J[n].radius<=0&&J.splice(n,1);for(var r=0;r<ee.length;r++)ee[r].length<=0&&ee.splice(r,1);e%te==0&&(J.push(new $),te=Math.floor(10*Math.random()+75))})),n}function re(){var e=F((0,r.useState)(!1),2),t=e[0];return e[1],r.createElement("div",null,r.createElement(q,{width:"480",height:"270",style:{background:"#333"}},r.createElement(G,null),r.createElement(N,null),function(e){for(var t=e.width,n=e.height,r=Z(200,300),a=Math.min(t,n),o=[],i=0;i<=Math.round(t/a);i++)for(var c=0;c<=Math.round(n/a);c++)o.push(H({baseSize:Math.max(t,n),x:i*t,y:c*n,baseHue:r}));var l=I(Array(5)).map((function(){return H({baseSize:a,x:[0,t],y:[0,n],baseHue:r})}));return[].concat(o,I(l))}({height:270,width:480}).map((function(e,t){return r.createElement(V,R({key:t},e))})),t&&r.createElement(B,null),r.createElement(ne,null)))}var ae=n(46037),oe=n(33604),ie=n(23986),ce=n.n(ie);function le(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ue(){var e,t,n=(0,r.useRef)(),a=(0,r.useRef)(),o=(e=(0,r.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return le(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?le(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),i=o[0],c=o[1];(0,r.useEffect)((function(){var e=n.current,t=new ae.mh({canvas:e}),r=new ae.jy({width:480,height:270});t.append(r);var a=new ae.ZA;a.attr({pos:[240,100]}),t.append(a);var o=new ae.__("Hello World !");o.attr({anchor:[.5,.5],font:"bold 48px Arial",fillColor:"#ffdc45"});var i=new ae.__("SpriteJS.org");i.attr({anchor:[.5,.5],y:60,font:"bold 48px Arial",fillColor:"#ffdc45"}),a.animate([{scale:1.5,rotate:-30},{scale:1,rotate:0},{scale:1.5,rotate:30}],{duration:3e3,iterations:1/0,direction:"alternate"}),a.append(o,i)}),[]);var l=(0,r.useCallback)((function(){i.stopRecord(),i.getStreamURL().then((function(e){return a.current.src=e})).catch((function(e){return console.error(e)})),c(null)})),u=(0,r.useCallback)((function(){var e=n.current,t=new oe.p({canvas:e,outVideoType:"mp4",workerOptions:{corePath:"ffmpeg/ffmpeg-core.js",logger:console.info}});t.startRecord(),c(t)}));return r.createElement("div",null,r.createElement("canvas",{ref:n,width:"480",height:"270"}),r.createElement("div",null,i?r.createElement("button",{key:"stop",onClick:l},"Stop Recording"):r.createElement("button",{key:"start",onClick:u},"Start Recording")),r.createElement("video",{ref:a,width:"480",height:"270",controls:!0,autoPlay:!0}))}Object.assign(window,{FFmpeg:ce()});var se=n(72524),fe=n(39467),he=n(95505),de=n(41629),me=n(35219),ve=n(18648),pe=n(81419),ye=n(91090),ge=n(86446),be="\n                attribute vec3 position;\n                attribute vec3 normal;\n                attribute vec2 uv;\n                uniform mat4 modelViewMatrix;\n                uniform mat4 projectionMatrix;\n                uniform mat3 normalMatrix;\n                varying vec2 vUv;\n                varying vec3 vNormal;\n                void main() {\n                    vUv = uv;\n                    vNormal = normalize(normalMatrix * normal);\n                    \n                    gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n                }\n            ",we="\n                precision highp float;\n                uniform sampler2D tMap;\n                varying vec2 vUv;\n                varying vec3 vNormal;\n                void main() {\n                    vec3 normal = normalize(vNormal);\n                    float lighting = 0.2 * dot(normal, normalize(vec3(-0.3, 0.8, 0.6)));\n                    vec3 tex = texture2D(tMap, vUv).rgb;\n                    gl_FragColor.rgb = tex + lighting + vec3(vUv - 0.5, 0.0) * 0.1;\n                    gl_FragColor.a = 1.0;\n                }\n            ";function xe(){var e=(0,r.useRef)(),t=(0,r.useRef)();return(0,r.useEffect)((function(){var n=e.current,r=new pe.T({canvas:n,width:n.width,height:n.height,dpr:2}),a=r.gl,o=new ye.V(a,{fov:35});o.position.set(0,1,5),o.lookAt([0,0,0]);var i=new ye.V(a,{fov:35});i.position.set(0,1,5),i.lookAt([0,0,0]),i.perspective({aspect:a.canvas.width/a.canvas.height});var c=new ge.w,l=function(e){var t=new se.x(e),n=new fe.x(e,{image:new Uint8Array([191,25,54,255,96,18,54,255,96,18,54,255,37,13,53,255]),width:2,height:2,magFilter:e.NEAREST}),r=new he.$(e,{vertex:be,fragment:we,uniforms:{tMap:{value:n}}}),a=new de.K(e,{geometry:t,program:r});return{mesh:a,update:function(e){a.rotation.y-=.02}}}(a),u=l.mesh,s=l.update,f=function(e){var t=new se.x(e),n=new me.A(e,{width:512,height:512}),r=new he.$(e,{vertex:be,fragment:we,uniforms:{tMap:{value:n.texture}}}),a=new de.K(e,{geometry:t,program:r});return{mesh:a,target:n,update:function(e){a.rotation.y-=.005,a.rotation.x-=.01}}}(a),h=f.mesh,d=f.target,m=f.update;h.setParent(c);var v=function(e){for(var t=new Float32Array(300),n=new Float32Array(400),r=0;r<100;r++)t.set([Math.random(),Math.random(),Math.random()],3*r),n.set([Math.random(),Math.random(),Math.random(),Math.random()],4*r);var a=new ve.Z(e,{position:{size:3,data:t},random:{size:4,data:n}}),o=new he.$(e,{vertex:"\n    attribute vec3 position;\n    attribute vec4 random;\n    uniform mat4 modelMatrix;\n    uniform mat4 viewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform float uTime;\n    varying vec4 vRandom;\n    void main() {\n        vRandom = random;\n        \n        // positions are 0->1, so make -1->1\n        vec3 pos = position * 2.0 - 1.0;\n        \n        // Scale towards camera to be more interesting\n        pos.z *= 10.0;\n        \n        // modelMatrix is one of the automatically attached uniforms when using the Mesh class\n        vec4 mPos = modelMatrix * vec4(pos, 1.0);\n        // add some movement in world space\n        float t = uTime * 0.6;\n        mPos.x += sin(t * random.z + 6.28 * random.w) * mix(0.1, 1.5, random.x);\n        mPos.y += sin(t * random.y + 6.28 * random.x) * mix(0.1, 1.5, random.w);\n        mPos.z += sin(t * random.w + 6.28 * random.y) * mix(0.1, 1.5, random.z);\n        \n        // get the model view position so that we can scale the points off into the distance\n        vec4 mvPos = viewMatrix * mPos;\n        gl_PointSize = 300.0 / length(mvPos.xyz) * (random.x + 0.1);\n        gl_Position = projectionMatrix * mvPos;\n    }\n",fragment:"\n    precision highp float;\n    uniform float uTime;\n    varying vec4 vRandom;\n    void main() {\n        vec2 uv = gl_PointCoord.xy;\n        \n        float circle = smoothstep(0.5, 0.4, length(uv - 0.5)) * 0.8;\n        \n        gl_FragColor.rgb = 0.8 + 0.2 * sin(uv.yxx + uTime + vRandom.y * 6.28) + vec3(0.1, 0.0, 0.3);\n        gl_FragColor.a = circle;\n    }\n",uniforms:{uTime:{value:0}},transparent:!0,depthTest:!1}),i=new de.K(e,{mode:e.POINTS,geometry:a,program:o});return{mesh:i,update:function(e){i.rotation.x=.1*Math.sin(2e-4*e),i.rotation.y=.15*Math.cos(5e-4*e),i.rotation.z+=.01,o.uniforms.uTime.value=.001*e}}}(a),p=v.mesh,y=v.update;p.setParent(c);var g=function(e,t){var n=t.video,r=new se.x(e),a=new fe.x(e),o=new he.$(e,{vertex:"\n    attribute vec2 uv;\n    attribute vec3 position;\n    attribute vec3 normal;\n    uniform mat4 modelViewMatrix;\n    uniform mat4 projectionMatrix;\n    uniform mat3 normalMatrix;\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n        vUv = uv;\n        vNormal = normalize(normalMatrix * normal);\n        \n        gl_Position = projectionMatrix * modelViewMatrix * vec4(position, 1.0);\n    }\n",fragment:"\n    precision highp float;\n    uniform sampler2D tMap;\n    varying vec2 vUv;\n    varying vec3 vNormal;\n    void main() {\n        vec3 normal = normalize(vNormal);\n        vec3 tex = texture2D(tMap, vUv).rgb;\n        \n        vec3 light = normalize(vec3(0.5, 1.0, -0.3));\n        float shading = dot(normal, light) * 0.15;\n        \n        gl_FragColor.rgb = tex + shading;\n        gl_FragColor.a = 1.0;\n    }\n",uniforms:{tMap:{value:a}}}),i=new de.K(e,{geometry:r,program:o});return{mesh:i,program:o,update:function(e){n.readyState>=n.HAVE_ENOUGH_DATA&&(a.image||(a.image=n),a.needsUpdate=!0),i.rotation.y-=.04,i.rotation.x+=.03}}}(a,{video:t.current}),b=g.mesh,w=g.update;b.setParent(c),requestAnimationFrame((function e(t){requestAnimationFrame(e),s(t),m(t),y(t),w(t),a.clearColor(.15,.05,.2,1),r.render({scene:u,camera:o,target:d}),a.clearColor(1,1,1,1),r.render({scene:c,camera:i})}))})),r.createElement("div",null,r.createElement("video",{ref:t,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0}),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}var Ee=n(28826),Se=["video","children"];function Oe(){return Oe=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},Oe.apply(this,arguments)}var Pe=(0,r.createContext)(null),ke=["#FF1461","#18FF92","#5A87FF","#FBF38C"];function Me(e){for(var t=0;t<e.animatables.length;t++)e.animatables[t].target.draw()}function Ae(e){var t,n=e.video,a=e.children,o=void 0===a?null:a,i=function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,Se),c=(0,r.useRef)();return(0,r.useEffect)((function(){var e=c.current.getContext("2d");function t(t,n){var r={};return r.x=t,r.y=n,r.color=ke[Ee.Z.random(0,ke.length-1)],r.radius=Ee.Z.random(16,32),r.endPos=function(e){var t=Ee.Z.random(0,360)*Math.PI/180,n=Ee.Z.random(50,180),r=[-1,1][Ee.Z.random(0,1)]*n;return{x:e.x+r*Math.cos(t),y:e.y+r*Math.sin(t)}}(r),r.draw=function(){e.beginPath(),e.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),e.fillStyle=r.color,e.fill()},r}(0,Ee.Z)({duration:1/0,update:function(){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(n.current,0,0,n.current.width,n.current.height)}});var r=e.canvas.width/2,a=e.canvas.height/2;!function n(){window.human||(function(n,r){for(var a=function(t,n){var r={};return r.x=t,r.y=n,r.color="#FFF",r.radius=.1,r.alpha=.5,r.lineWidth=6,r.draw=function(){e.globalAlpha=r.alpha,e.beginPath(),e.arc(r.x,r.y,r.radius,0,2*Math.PI,!0),e.lineWidth=r.lineWidth,e.strokeStyle=r.color,e.stroke(),e.globalAlpha=1},r}(n,r),o=[],i=0;i<30;i++)o.push(t(n,r));Ee.Z.timeline().add({targets:o,x:function(e){return e.endPos.x},y:function(e){return e.endPos.y},radius:.1,duration:Ee.Z.random(1200,1800),easing:"easeOutExpo",update:Me}).add({targets:a,radius:Ee.Z.random(80,160),lineWidth:0,alpha:{value:0,easing:"linear",duration:Ee.Z.random(600,800)},duration:Ee.Z.random(1200,1800),easing:"easeOutExpo",update:Me,offset:0})}(Ee.Z.random(r-50,r+50),Ee.Z.random(a-50,a+50)),(0,Ee.Z)({duration:500}).finished.then(n))}()}),[c]),r.createElement(Pe.Provider,{value:null===(t=c.current)||void 0===t?void 0:t.getContext("2d")},r.createElement("canvas",Oe({ref:c},i)),o)}function _e(){var e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(Ae,{video:e,width:"480",height:"270"})))}var Ce=n(75743),je=n(19610),Te=n(23493),Re=n.n(Te),Ie=n(73463),Fe=n.n(Ie);function Le(e){return Le="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},Le(e)}function ze(){return ze=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ze.apply(this,arguments)}function De(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function We(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function Ze(e,t,n){return t&&We(e.prototype,t),n&&We(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function Ue(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&Ye(e,t)}function Ye(e,t){return Ye=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},Ye(e,t)}function He(e){var t=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}();return function(){var n,r=qe(e);if(t){var a=qe(this).constructor;n=Reflect.construct(r,arguments,a)}else n=r.apply(this,arguments);return Xe(this,n)}}function Xe(e,t){if(t&&("object"===Le(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function qe(e){return qe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},qe(e)}const Ne=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=t.refreshRate,a=void 0===n?60:n,o=function(t){Ue(o,t);var n=He(o);function o(e){var t;return De(this,o),(t=n.call(this,e)).state={time:0,tick:0},t}return Ze(o,[{key:"componentDidMount",value:function(){var e,t,n=this,r=1e3/a;t=-r,this._r=Re()((function a(o){n._r=Re()(a),e||(e=o),o-t>r&&(t=o,n.setState({time:o-e,tick:n.state.tick+1}))}))}},{key:"componentWillUnmount",value:function(){Re().cancel(this._r)}},{key:"render",value:function(){return r.createElement(e,ze({},this.props,this.state))}}]),o}(r.PureComponent);return Fe()(o,e),o};var Be,Ve,Ge,$e=Ce.Shaders.create({gradients:{frag:(0,Ce.GLSL)(Be||(Ve=["\nprecision highp float;\nvarying vec2 uv;\nuniform vec4 colors[3];\nuniform vec2 particles[3];\nvoid main () {\n  vec4 sum = vec4(0.0);\n  for (int i=0; i<3; i++) {\n    vec4 c = colors[i];\n    vec2 p = particles[i];\n    float d = c.a * smoothstep(0.6, 0.2, distance(p, uv));\n    sum += d * vec4(c.a * c.rgb, c.a);\n  }\n  if (sum.a > 1.0) {\n    sum.rgb /= sum.a;\n    sum.a = 1.0;\n  }\n  gl_FragColor = vec4(sum.a * sum.rgb, 1.0);\n}\n"],Ge||(Ge=Ve.slice(0)),Be=Object.freeze(Object.defineProperties(Ve,{raw:{value:Object.freeze(Ge)}}))))}}),Ke=Ne((function(e){var t=e.time;return r.createElement(Ce.Node,{shader:$e.gradients,uniforms:{colors:[[Math.cos(.002*t),Math.sin(.002*t),.2,1],[Math.sin(.002*t),-Math.cos(.002*t),.1,1],[.3,Math.sin(3+.002*t),Math.cos(1+.003*t),1]],particles:[[.3,.3],[.7,.5],[.4,.9]]}})}));function Qe(){return r.createElement(je.T,{width:480,height:270},r.createElement(Ke,null))}var Je,et=n(55066),tt=Ce.Shaders.create({funky:{frag:(0,Ce.GLSL)(Je||(Je=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nprecision highp float;\nvarying vec2 uv;\nuniform sampler2D t;\nvoid main() {\n  gl_FragColor = texture2D(t, uv) * vec4(\n    0.5 + 0.5 * cos(uv.x * 30.0),\n    0.5 + 0.5 * sin(uv.y * 20.0),\n    0.7 + 0.3 * sin(uv.y * 8.0),\n    1.0);\n}\n"])))}}),nt=function(e){var t=e.children;return r.createElement(Ce.Node,{shader:tt.funky,uniforms:{t}})};function rt(){return r.createElement(je.T,{width:480,height:270,style:{background:'#fff url(\'data:image/svg+xml,        <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200" fill-opacity=".05" >          <rect x="100" width="100" height="100" />          <rect y="100" width="100" height="100" />        </svg>\')',backgroundSize:"5%"},webglContextAttributes:{premultipliedAlpha:!1}},r.createElement(nt,null,r.createElement(Ce.LinearCopy,null,r.createElement(et.Z,{width:400,height:200},{background:"rgba(0,0,0,.2)",size:[400,200],draws:[{textAlign:"center",fillStyle:"#fff",font:"48px bold Arial"},["fillText","Hello World\n2d canvas text\ninjected as texture",200,60,56]]}))))}var at=["video","children"];function ot(){return ot=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},ot.apply(this,arguments)}function it(e){return function(e){if(Array.isArray(e))return lt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||ct(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ct(e,t){if(e){if("string"==typeof e)return lt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?lt(e,t):void 0}}function lt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function ut(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function st(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function ft(e,t,n){return t&&st(e.prototype,t),n&&st(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}function ht(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}var dt=["#FF1461","#18FF92","#5A87FF","#FBF38C"],mt=function(){function e(t){var n=t.x,r=t.y,a=t.w,o=t.h,i=t.color;ut(this,e),ht(this,"color",""),ht(this,"opacity",0),ht(this,"scaleX",1),ht(this,"x",0),ht(this,"y",0),ht(this,"w",0),ht(this,"h",0),Object.assign(this,{x:n,y:r,w:a,h:o,color:i})}return ft(e,[{key:"draw",value:function(e){var t=e.canvas,n=t.width,r=t.height,a=this.x,o=this.y,i=this.w,c=this.h,l=this.color,u=this.scaleX,s=this.opacity;e.save(),e.globalAlpha=s,e.fillStyle=l,e.fillRect((.8*a+.1)*n,(.8*o+.1)*r,.8*i*n*u,.8*c*r),e.restore()}}]),e}(),vt=function(){function e(t){var n=t.text,r=t.x,a=t.y,o=t.size,i=t.color;ut(this,e),ht(this,"color",""),ht(this,"opacity",0),ht(this,"rotateZ",0),ht(this,"scale",1),ht(this,"size",30),ht(this,"text",""),ht(this,"translateX",0),ht(this,"translateY",0),ht(this,"x",0),ht(this,"y",0),Object.assign(this,{text:n,x:r,y:a,size:o,color:i})}return ft(e,[{key:"draw",value:function(e){var t=e.canvas,n=t.width,r=t.height,a=this.rotateZ,o=this.size,i=this.text,c=this.x,l=this.y,u=this.scale,s=this.color,f=this.opacity,h=this.translateX,d=this.translateY,m=.8*o*r,v=function(e){return"string"==typeof e?(r=e.match(/^([+-]?[-e0-9.]+)(px|em)$/)||[],(t=r,n=3,a=function(e){if(Array.isArray(e))return e}(t)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(t,n)||ct(t,n)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0],o=a[1],i=a[2],{px:o,em:o*m}[i]):e;var t,n,r,a,o,i};e.save(),e.globalAlpha=f,e.fillStyle=s,e.font="".concat(m,"px Arial"),e.textAlign="start",e.textBaseline="alphabetic",e.beginPath(),e.rect(0,0,n,.75*r),e.clip();var p=e.measureText(i).width;e.translate((.8*c+.1)*n+p/2+v(h),(.8*(l+o/2)+.1)*r+v(d)),e.scale(u,u),e.rotate(a*Math.PI/180),e.fillText(i,-p/2,o/2*.8*r),e.restore()}}]),e}();function pt(e){var t=e.video,n=(e.children,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,at)),a=(0,r.useRef)();return(0,r.useEffect)((function(){var e=a.current.getContext("2d"),n="Letters".split("").map((function(e,t,n){return new vt({text:e,x:t/n.length,y:1/3,size:1/3,color:dt[3]})})),r=[.3,.8].map((function(e,t){return new mt({x:0,y:e,w:1,h:.02,color:dt[t+1]})}));(0,Ee.Z)({duration:1/0,update:function(){e.clearRect(0,0,e.canvas.width,e.canvas.height),e.drawImage(t.current,0,0,t.current.width,t.current.height)}});var o=function(t){for(var n=0;n<t.animatables.length;n++)t.animatables[n].target.draw(e)};Ee.Z.timeline({loop:!0}).add({targets:it(r),opacity:[0,1],scaleX:[0,1],duration:750,easing:"easeOutExpo",delay:function(e,t,n){return 200*(n-t-1)},update:o}).add({targets:it(n),opacity:1,rotateZ:[180,0],scale:1,translateY:["1.6em",0],translateX:[".8em",0],translateZ:0,duration:750,easing:"easeOutExpo",delay:function(e,t){return 50*t},update:o},"-=".concat(950)).add({targets:[].concat(it(n),it(r)),opacity:0,duration:1e3,easing:"easeOutExpo",delay:1e3,update:o}).add({targets:it(r),opacity:[0,1],scaleX:[0,1],duration:600,easing:"easeOutExpo",delay:function(e,t,n){return 200*(n-t-1)},update:o}).add({targets:it(n),opacity:[0,1],rotateZ:0,scale:[.3,1],translateX:0,translateY:0,translateZ:0,duration:800,easing:"easeOutExpo",delay:function(e,t){return 50*(t+1)},update:o},"-=".concat(800)).add({targets:[].concat(it(n),it(r)),opacity:0,duration:1e3,easing:"easeOutExpo",delay:1e3})}),[a]),r.createElement("canvas",ot({ref:a},n))}function yt(){var e=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement("div",null,r.createElement(pt,{video:e,width:"480",height:"270"})))}function gt(){var e=(0,r.useRef)(null),t=(0,r.useRef)(null),a=(0,r.useRef)(null),o=(0,r.useRef)(null),i=(0,r.useCallback)((function(){var n,r,i,c=t.current,l=o.current,u=e.current.getContext("2d"),s=a.current.getContext("2d");u.clearRect(0,0,c.naturalWidth,c.naturalHeight),u.drawImage(c,0,0),r=(n=u.getImageData(0,0,c.naturalWidth,c.naturalHeight)).data,s.clearRect(0,0,l.naturalWidth,l.naturalHeight),s.drawImage(l,0,0),i=s.getImageData(0,0,l.naturalWidth,l.naturalHeight).data;for(var f=0,h=r.length;f<h;f+=4){var d,m,v,p,y,g,b,w;d=Math.floor(r[f]/4),m=Math.floor(r[f+1]/4),p=(v=Math.floor(r[f+2]/4))%8*64+d,g=i[y=4*((64*Math.floor(v/8)+m)*l.naturalWidth+p)],b=i[y+1],w=i[y+2],r[f]=g,r[f+1]=b,r[f+2]=w}u.clearRect(0,0,c.naturalWidth,c.naturalHeight),u.putImageData(n,0,0)}));return r.createElement("div",null,r.createElement("div",null,r.createElement("img",{ref:o,src:n(86751).Z,alt:"lut",width:"512",height:"512"})),r.createElement("div",null,r.createElement("img",{ref:t,src:"https://i.imgur.com/0bUSEBX.jpg",alt:"The Scream",crossOrigin:"Anonymous",width:"480",height:"270"})),r.createElement("div",null,r.createElement("button",{onClick:i},"Apply LUT")),r.createElement("canvas",{ref:e,width:"480",height:"270",style:{border:"1px solid #d3d3d3"}},"Your browser does not support the HTML5 canvas tag."),r.createElement("canvas",{ref:a,width:"512",height:"512",style:{border:"1px solid #d3d3d3"}},"Your browser does not support the HTML5 canvas tag."))}var bt=n(72807),wt=n(78182),xt=n(4568);function Et(){var e=(0,r.useRef)();return(0,r.useEffect)((function(){var t=e.current,n=new pe.T({canvas:t,width:t.width,height:t.height,dpr:2,alpha:!0,premultipliedAlpha:!1}),r=n.gl,a=new ge.w,o=[];function i(e,t){var n=Math.random();return e*(1-n)+t*n}["#e09f7d","#ef5d60","#ec4067","#a01a7d","#311847"].forEach((function(e,t){for(var n={spring:i(.02,.1),friction:i(.7,.95),mouseVelocity:new bt.A,mouseOffset:new bt.A(.02*i(-1,1))},c=n.points=[],l=0;l<20;l++)c.push(new bt.A);n.polyline=new wt.a(r,{points:c,vertex:"\n    precision highp float;\n    attribute vec3 position;\n    attribute vec3 next;\n    attribute vec3 prev;\n    attribute vec2 uv;\n    attribute float side;\n    uniform vec2 uResolution;\n    uniform float uDPR;\n    uniform float uThickness;\n    vec4 getPosition() {\n        vec4 current = vec4(position, 1);\n        vec2 aspect = vec2(uResolution.x / uResolution.y, 1);\n        vec2 nextScreen = next.xy * aspect;\n        vec2 prevScreen = prev.xy * aspect;\n    \n        // Calculate the tangent direction\n        vec2 tangent = normalize(nextScreen - prevScreen);\n    \n        // Rotate 90 degrees to get the normal\n        vec2 normal = vec2(-tangent.y, tangent.x);\n        normal /= aspect;\n        // Taper the line to be fatter in the middle, and skinny at the ends using the uv.y\n        normal *= mix(1.0, 0.1, pow(abs(uv.y - 0.5) * 2.0, 2.0) );\n        // When the points are on top of each other, shrink the line to avoid artifacts.\n        float dist = length(nextScreen - prevScreen);\n        normal *= smoothstep(0.0, 0.02, dist);\n        float pixelWidthRatio = 1.0 / (uResolution.y / uDPR);\n        float pixelWidth = current.w * pixelWidthRatio;\n        normal *= pixelWidth * uThickness;\n        current.xy -= normal * side;\n    \n        return current;\n    }\n    void main() {\n        gl_Position = getPosition();\n    }\n",uniforms:{uColor:{value:new xt.I(e)},uThickness:{value:i(20,50)}}}),n.polyline.mesh.setParent(a),o.push(n)}));var c=new bt.A;function l(e){e.changedTouches&&e.changedTouches.length&&(e.x=e.changedTouches[0].pageX,e.y=e.changedTouches[0].pageY),void 0===e.x&&(e.x=e.pageX,e.y=e.pageY),c.set(e.x/r.renderer.width*2-1,e.y/r.renderer.height*-2+1,0)}"ontouchstart"in window?(window.addEventListener("touchstart",l,!1),window.addEventListener("touchmove",l,!1)):window.addEventListener("mousemove",l,!1);var u=new bt.A;requestAnimationFrame((function e(t){requestAnimationFrame(e),o.forEach((function(e){for(var t=e.points.length-1;t>=0;t--)t?e.points[t].lerp(e.points[t-1],.9):(u.copy(c).add(e.mouseOffset).sub(e.points[t]).multiply(e.spring),e.mouseVelocity.add(u).multiply(e.friction),e.points[t].add(e.mouseVelocity));e.polyline.updateGeometry()})),n.render({scene:a})}))})),r.createElement("div",null,r.createElement("canvas",{ref:e,width:"480",height:"270",style:{background:'#fff\n            url(\'data:image/svg+xml,           <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"         fill-opacity=".05" >                    <rect x="100" width="100" height="100" />                    <rect y="100" width="100" height="100" />                    </svg>\')',backgroundSize:"10%"}}))}function St(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Ot(){var e,t,n=(0,r.useRef)(null),a=(e=(0,r.useState)(null),t=2,function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return St(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?St(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),o=a[0],i=a[1],c=(0,r.useCallback)((function(){return navigator.mediaDevices.getDisplayMedia({video:{mediaSource:"screen"}}).then((function(e){var t=new MediaRecorder(e),r=[];t.addEventListener("dataavailable",(function(e){var t=e.data;return r.push(t)})),t.addEventListener("stop",(function(){n.current.src=URL.createObjectURL(new Blob(r,{type:r[0].type})),i(null)})),t.start(),i({stream:e,record:t})})).catch(console.info)})),l=(0,r.useCallback)((function(){o.stream.getVideoTracks()[0].stop(),o.record.stop()}));return r.createElement("div",null,r.createElement("div",null,o?r.createElement("button",{key:"stop",onClick:l},"Stop Recording"):r.createElement("button",{key:"start",onClick:c},"Start Recording")),r.createElement("video",{ref:n,width:"480",height:"270",autoPlay:!0,controls:!0}))}function Pt(){var e=(0,r.useRef)();return(0,r.useEffect)((function(){var t=e.current,n=new ae.mh({canvas:t}),r=document.createElement("video");r.src="https://webrtc.github.io/samples/src/video/chrome.webm",r.crossOrigin="Anonymous",r.loop=!0,r.muted=!0,r.play();var a=t.cloneNode(),o=a.getContext("2d"),i=new ae.jy({width:480,height:270});n.canvas.style.backgroundColor="#3f097a",n.append(i);var c=new ae.ZA;c.attr({pos:[240,100]}),n.append(c);var l=new ae.__("Hello World !");l.attr({anchor:[.5,.5],font:"bold 48px Arial",fillColor:"#ffdc45"});var u=new ae.__("SpriteJS.org");u.attr({anchor:[.5,.5],y:60,font:"bold 48px Arial",fillColor:"#ffdc45"}),c.animate([{scale:1.5,rotate:-30},{scale:1,rotate:0},{scale:1.5,rotate:30}],{duration:3e3,iterations:1/0,direction:"alternate"}),c.append(l,u);var s=!1;r.addEventListener("playing",(function(){s||(s=!0,n.tick((function(){o.drawImage(r,0,0),i.attr("texture",a)})))}))})),r.createElement("div",null,r.createElement("canvas",{ref:e,width:"480",height:"270"}))}function kt(){var e=(0,r.useRef)(null);return(0,r.useEffect)((function(){var t=[];var n=0,r=document.createElement("video");return r.addEventListener("loadeddata",(function(){e.current.innerHTML="",r.currentTime=n}),!1),r.addEventListener("seeked",(function(){var a,o,i=r.duration/4;o=(a=document.createElement("canvas")).getContext("2d"),a.width=480,a.height=270,o.drawImage(r,0,0,480,270),t.push(a),t.length,(n+=i)<=r.duration?r.currentTime=n:function(){var n=document.createElement("canvas"),r=n.getContext("2d");n.width=480,n.height=270,e.current.appendChild(n),function(e){var n=0;!function r(){e.drawImage(t[n],0,0),n=(n+1)%t.length,setTimeout(r,500)}()}(r)}()}),!1),r.preload="auto",r.src="https://www.html5rocks.com/en/tutorials/video/basics/devstories.webm",function(){}}),[e]),r.createElement("div",{ref:e})}var Mt=n(15278);function At(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function _t(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?At(Object(n),!0).forEach((function(t){Ct(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):At(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function Ct(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function jt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Tt(){var e,t,n,a,o,i=(a=(0,r.useState)(null),o=2,function(e){if(Array.isArray(e))return e}(a)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(a,o)||function(e,t){if(e){if("string"==typeof e)return jt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?jt(e,t):void 0}}(a,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),c=i[0],l=i[1],u=(0,r.useRef)(),s=(0,r.useCallback)((function(){return u.current.requestPictureInPicture()}));return(0,r.useEffect)((function(){var e=u.current;console.log({video:e});var t=e.readyState;console.log({readyState:t}),e.requestVideoFrameCallback((function t(n,r){console.log({now:n,metadata:r}),console.log(e.getVideoPlaybackQuality()),e.requestVideoFrameCallback(t)})),e.addEventListener("error",(function(){var t=e.error;console.log(["error"],{error:t})})),e.addEventListener("loadedmetadata",(function(){var t=e.currentTime,n=e.videoWidth,r=e.videoHeight,a=e.duration,o=e.readyState;console.log(["loadedmetadata"],{currentTime:t,videoWidth:n,videoHeight:r,duration:a,readyState:o}),l((function(){return{currentTime:t,duration:a}}))})),e.addEventListener("seeked",(function(){var t=e.currentTime,n=e.playbackRate,r=e.seeking;console.log(["seeked"],{currentTime:t,playbackRate:n,seeking:r})})),e.addEventListener("timeupdate",(function(){var t=e.currentTime,n=e.playbackRate,r=e.seeking;console.log(["timeupdate"],{currentTime:t,playbackRate:n,seeking:r}),l((function(e){return _t(_t({},e),{},{currentTime:t})}))}))}),[]),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:s},"pip"),c&&(t=(e=c).currentTime,n=e.duration,r.createElement("div",{className:Mt.Z.Duration},r.createElement("span",{className:Mt.Z.Progress,style:{width:"".concat(100*t/n,"%")}}),t," / ",n))),r.createElement("video",{ref:u,width:"480",height:"270",src:"https://webrtc.github.io/samples/src/video/chrome.webm",controls:!0}))}function Rt(e,t,n,r,a,o,i){try{var c=e[o](i),l=c.value}catch(e){return void n(e)}c.done?t(l):Promise.resolve(l).then(r,a)}function It(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||function(e,t){if(e){if("string"==typeof e)return Ft(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Ft(e,t):void 0}}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function Ft(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function Lt(){var e=It((0,r.useState)(""),2),t=e[0],a=e[1],o=It((0,r.useState)("Click Start to transcode"),2),i=o[0],c=o[1],l=(0,ie.createFFmpeg)({corePath:"ffmpeg/ffmpeg-core.js",log:!0}),u=function(){var e,t=(e=regeneratorRuntime.mark((function e(){var t;return regeneratorRuntime.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return c("Loading ffmpeg-core.js"),e.next=3,l.load();case 3:return c("Start transcoding"),e.t0=l,e.next=7,(0,ie.fetchFile)(n(82444).Z);case 7:return e.t1=e.sent,e.t0.FS.call(e.t0,"writeFile","test.avi",e.t1),e.next=11,l.run("-i","test.avi","test.mp4");case 11:c("Complete transcoding"),t=l.FS("readFile","test.mp4"),a(URL.createObjectURL(new Blob([t.buffer],{type:"video/mp4"})));case 14:case"end":return e.stop()}}),e)})),function(){var t=this,n=arguments;return new Promise((function(r,a){var o=e.apply(t,n);function i(e){Rt(o,r,a,i,c,"next",e)}function c(e){Rt(o,r,a,i,c,"throw",e)}i(void 0)}))});return function(){return t.apply(this,arguments)}}();return r.createElement("div",null,r.createElement("video",{src:t,width:"480",height:"270",controls:!0}),r.createElement("div",null,r.createElement("button",{onClick:u},"Transcode")),r.createElement("div",null,i))}var zt=n(57257),Dt=n(72685),Wt=n.n(Dt),Zt="wxqlQkh,G2Whuq3,0bUSEBX,giP58XN,iKdXwVm,IvpoR40,zJIxPEo,CKlmtPs,fnMylHI,vGXYiYy,MnOB9Le,YqsZKgc,0BJobQo,Otbz312".split(",").map((function(e){return"https://i.imgur.com/".concat(e,".jpg")})),Ut=Ne((function(e){var t=e.slides,n=e.delay,a=e.duration,o=e.time,i=Math.floor(o/(n+a)),c=t[i%t.length],l=t[(i+1)%t.length],u=Wt()[i%Wt().length],s=(o-i*(n+a)-n)/a;return s>0?r.createElement(zt.Z,{from:c,to:l,progress:s,transition:u}):r.createElement(Ce.LinearCopy,null,c)}));function Yt(){return r.createElement(je.T,{width:480,height:270},r.createElement(Ut,{slides:Zt,delay:2e3,duration:1500}))}var Ht=n(79467);function Xt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,a,o=[],i=!0,c=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(o.push(r.value),!t||o.length!==t);i=!0);}catch(e){c=!0,a=e}finally{try{i||null==n.return||n.return()}finally{if(c)throw a}}return o}}(e,t)||qt(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function qt(e,t){if(e){if("string"==typeof e)return Nt(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?Nt(e,t):void 0}}function Nt(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var Bt=Object.freeze({GRAY_SCALE:"GRAY_SCALE",CHROMA_KEY:"CHROMA_KEY"}),Vt=["https://webrtc.github.io/samples/src/video/chrome.webm","https://mdn.github.io/dom-examples/canvas/chroma-keying/media/video.mp4"];function Gt(e){var t=e.counter,n=Xt((0,r.useState)([]),2),a=n[0],o=n[1],i=Xt((0,r.useState)(Object.keys(Bt)[0]),2),c=i[0],l=i[1],u=Xt((0,r.useState)(Vt[0]),2),s=u[0],f=u[1],h=(0,r.useRef)(),d=(0,r.useRef)(),m=(0,r.useRef)(),v=(0,r.useRef)(),p=(0,r.useRef)(t);return(0,r.useEffect)((function(){p.current=t}),[t]),(0,r.useEffect)((function(){var e=d.current.getContext("2d"),t=function(t,n,r){var a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"left";e.font="30px Sans-serif",e.textAlign=a,e.strokeStyle="black",e.lineWidth=4,e.strokeText(t,n,r),e.fillStyle="white",e.fillText(t,n,r)},n=function n(){if(!h.current.ended&&!h.current.paused){e.drawImage(h.current,0,0,h.current.width,h.current.height);for(var r=e.getImageData(0,0,d.current.width,d.current.height),a=r.data,o=0;o<a.length;o+=4){var i=a[o],l=a[o+1],u=a[o+2];if(c===Bt.GRAY_SCALE){var s=(i+l+u)/3;a[o]=s,a[o+1]=s,a[o+2]=s}else c===Bt.CHROMA_KEY&&l>100&&i>100&&u<43&&(a[o+3]=0)}e.putImageData(r,0,0,0,0,h.current.width,h.current.height),t(p.current,10,40),t(h.current.currentTime,470,250,"right"),h.current.requestVideoFrameCallback(n)}},r=function(){h.current.requestVideoFrameCallback(n)};return h.current.addEventListener("play",r,!1),h.current.addEventListener("loadedmetadata",(function(){var e,t=h.current,n=t.videoWidth,r=t.videoHeight,a=t.duration;console.log(["loadedmetadata"],{videoWidth:n,videoHeight:r,duration:a}),o((e=Array(Math.floor(a)),function(e){if(Array.isArray(e))return Nt(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||qt(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()).map((function(e,t){return t})))})),h.current.addEventListener("timeupdate",(function(){var e=h.current.currentTime;console.log(["timeupdate"],{currentTime:e})})),function(){h.current.removeEventListener("play",r)}}),[h,d,s,c]),r.createElement("div",null,r.createElement("div",null,r.createElement("select",{value:s,onChange:function(e){return f(e.target.value)}},Vt.map((function(e,t){return r.createElement("option",{key:t,value:e},e)})))),r.createElement("video",{ref:h,src:s,width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0}),r.createElement("div",null,r.createElement("select",{value:c,onChange:function(e){return l(e.target.value)}},Object.entries(Bt).map((function(e,t){var n=Xt(e,2),a=n[0],o=n[1];return r.createElement("option",{key:t,value:a},o)})))),r.createElement("div",null,r.createElement("canvas",{ref:d,className:Ht.Z.Canvas,width:"480",height:"270"})),r.createElement("div",null,r.createElement("select",{onChange:function(e){return h.current.currentTime=e.target.value}},a.map((function(e,t){return r.createElement("option",{key:t,value:e},e)}))),r.createElement("button",{onClick:function(){return v.current.setAttribute("href",d.current.toDataURL()),v.current.setAttribute("download","thumbnail.png"),void m.current.setAttribute("src",d.current.toDataURL())}},"capture")," ",r.createElement("a",{ref:v,href:"#"},"download")),r.createElement("div",null,r.createElement("img",{ref:m,className:Ht.Z.Image,width:"480",height:"270",alt:"",onClick:function(e){return window.open(e.target.getAttribute("src"))}})))}var $t=n(94286),Kt=n.n($t),Qt={title:"Monochrome",description:"Change images to a single chroma (e.g can be used to make a black & white filter). Input color mix and output color mix can be adjusted.",vertexShader:"\n      attribute vec2 a_position;\n      attribute vec2 a_texCoord;\n      varying vec2 v_texCoord;\n      void main() {\n          gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n          v_texCoord = a_texCoord;\n      }",fragmentShader:"\n      precision mediump float;\n      uniform sampler2D u_image;\n      uniform vec3 inputMix;\n      uniform vec3 outputMix;\n      varying vec2 v_texCoord;\n      varying float v_mix;\n      void main(){\n          vec4 color = texture2D(u_image, v_texCoord);\n          float mono = color[0]*inputMix[0] + color[1]*inputMix[1] + color[2]*inputMix[2];\n          color[0] = mono * outputMix[0];\n          color[1] = mono * outputMix[1];\n          color[2] = mono * outputMix[2];\n          gl_FragColor = color;\n      }",properties:{inputMix:{type:"uniform",value:[.4,.6,.2]},outputMix:{type:"uniform",value:[1,1,1]}},inputs:["u_image"]};function Jt(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useCallback)((function(e){t.current.state===Kt().STATE.PLAYING?t.current.pause():(t.current.currentTime=0,t.current.play())}));return(0,r.useEffect)((function(){var n=e.current,r=new(Kt())(n),a=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4");a.start(0),a.stop(60);var o=r.effect(Qt);o.outputMix=[1.25,1.18,.9],a.connect(o),o.connect(r.destination),t.current=r})),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:n},"Play / Pause")),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}var en={title:"Cross-Fade",description:"A cross-fade effect. Typically used as a transistion.",vertexShader:"\n          attribute vec2 a_position;\n          attribute vec2 a_texCoord;\n          varying vec2 v_texCoord;\n          void main() {\n              gl_Position = vec4(vec2(2.0,2.0)*a_position-vec2(1.0, 1.0), 0.0, 1.0);\n              v_texCoord = a_texCoord;\n          }",fragmentShader:"\n          precision mediump float;\n          uniform sampler2D u_image_a;\n          uniform sampler2D u_image_b;\n          uniform float mix;\n          varying vec2 v_texCoord;\n          varying float v_mix;\n          void main(){\n              vec4 color_a = texture2D(u_image_a, v_texCoord);\n              vec4 color_b = texture2D(u_image_b, v_texCoord);\n              color_a[0] *= mix;\n              color_a[1] *= mix;\n              color_a[2] *= mix;\n              color_a[3] *= mix;\n              color_b[0] *= (1.0 - mix);\n              color_b[1] *= (1.0 - mix);\n              color_b[2] *= (1.0 - mix);\n              color_b[3] *= (1.0 - mix);\n              gl_FragColor = color_a + color_b;\n          }",properties:{mix:{type:"uniform",value:0}},inputs:["u_image_a","u_image_b"]};function tn(){var e=(0,r.useRef)(),t=(0,r.useRef)(),n=(0,r.useCallback)((function(e){t.current.state===Kt().STATE.PLAYING?t.current.pause():t.current.play()}));return(0,r.useEffect)((function(){var n=e.current,r=new(Kt())(n),a=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/BigBuckBunny.mp4");a.start(0),a.stop(4);var o=r.video("http://commondatastorage.googleapis.com/gtv-videos-bucket/sample/ElephantsDream.mp4");o.start(2),o.stop(6);var i=r.transition(en);i.transition(2,4,0,1,"mix"),a.connect(i),o.connect(i),i.connect(r.destination),t.current=r})),r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:n},"Play / Pause")),r.createElement("canvas",{ref:e,width:"480",height:"270"}))}function nn(){return r.createElement("div",null,r.createElement(Jt,null),r.createElement(tn,null))}var rn,an=n(7038);function on(){var e=(0,r.useRef)();return(0,r.useEffect)((function(){var t=e.current;(0,an.MediaPlayer)().create().initialize(t,"https://dash.akamaized.net/akamai/bbb_30fps/bbb_30fps.mpd",!1)}),[]),r.createElement("div",null,r.createElement("video",{ref:e,width:"480",height:"270",controls:!0}))}function cn(e){return cn="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},cn(e)}var ln=["onFrame"];function un(){return un=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},un.apply(this,arguments)}function sn(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function fn(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function hn(e,t){return hn=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},hn(e,t)}function dn(e,t){if(t&&("object"===cn(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function mn(e){return mn=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},mn(e)}var vn=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&hn(e,t)}(c,e);var t,n,a,o,i=(a=c,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=mn(a);if(o){var n=mn(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return dn(this,e)});function c(){return sn(this,c),i.apply(this,arguments)}return t=c,(n=[{key:"componentDidMount",value:function(){var e=this;this._raf=Re()((function t(){e._raf=Re()(t);var n=e.refs.video;if(n){var r=n.currentTime;r!==e.currentTime&&(e.currentTime=r,e.props.onFrame(r))}}))}},{key:"componentWillUnmount",value:function(){Re().cancel(this._raf)}},{key:"render",value:function(){var e=this.props,t=(e.onFrame,function(e,t){if(null==e)return{};var n,r,a=function(e,t){if(null==e)return{};var n,r,a={},o=Object.keys(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||(a[n]=e[n]);return a}(e,t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);for(r=0;r<o.length;r++)n=o[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}(e,ln));return r.createElement("video",un({},t,{ref:"video"}))}}])&&fn(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),c}(r.Component),pn=Ce.Shaders.create({SplitColor:{frag:(0,Ce.GLSL)(rn||(rn=function(e,t){return t||(t=e.slice(0)),Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))}(["\nprecision highp float;\nvarying vec2 uv;\nuniform sampler2D children;\nvoid main () {\n  float y = uv.y * 3.0;\n  vec4 c = texture2D(children, vec2(uv.x, mod(y, 1.0)));\n  gl_FragColor = vec4(\n    c.r * step(2.0, y) * step(y, 3.0),\n    c.g * step(1.0, y) * step(y, 2.0),\n    c.b * step(0.0, y) * step(y, 1.0),\n    1.0);\n}\n"])))}}),yn=function(e){var t=e.children;return r.createElement(Ce.Node,{shader:pn.SplitColor,uniforms:{children:t}})},gn="wxqlQkh,G2Whuq3,0bUSEBX,giP58XN,iKdXwVm,IvpoR40,zJIxPEo,CKlmtPs,fnMylHI,vGXYiYy,MnOB9Le,YqsZKgc,0BJobQo,Otbz312".split(",").map((function(e){return"https://i.imgur.com/".concat(e,".jpg")})),bn=Ne((function(e){var t=e.video1Ref,n=e.video2Ref,a=e.slides,o=e.delay,i=e.duration,c=e.time,l=[t,n].map((function(e){var t=e.current;return t.readyState>=t.HAVE_ENOUGH_DATA?t:null})),u=Math.floor(c/(o+i)),s=l[u%l.length]||a[u%a.length],f=l[(u+1)%l.length]||a[(u+1)%a.length],h=Wt()[u%Wt().length],d=(c-u*(o+i)-o)/i;return d>0?r.createElement(zt.Z,{from:s,to:f,progress:d,transition:h}):r.createElement(Ce.LinearCopy,null,s)}));const wn=function(){var e=(0,r.useRef)(),t=(0,r.useRef)();return r.createElement("div",null,r.createElement("div",null,r.createElement("video",{ref:e,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement(je.T,{width:480,height:270},r.createElement(bn,{slides:gn,delay:2e3,duration:1500,video1Ref:e,video2Ref:t})),r.createElement("div",null,r.createElement("video",{ref:t,src:"https://webrtc.github.io/samples/src/video/chrome.webm",width:"480",height:"270",preload:"none",crossOrigin:"anonymous",controls:!0})),r.createElement(je.T,{width:480,height:810,pixelRatio:1},r.createElement(yn,null,(function(e){return r.createElement(vn,{onFrame:e,autoPlay:!0,loop:!0,crossOrigin:"anonymous",src:"https://webrtc.github.io/samples/src/video/chrome.webm"})}))))};function xn(){var e=(0,a.v9)((function(e){return e.counter})),t=(0,a.I0)();return r.createElement("div",null,r.createElement("div",null,r.createElement("button",{onClick:function(){return t((0,o.n)())}},e)),r.createElement(Tt,null),r.createElement(on,null),r.createElement(ue,null),r.createElement(wn,null),r.createElement(rt,null),r.createElement(xe,null),r.createElement(Et,null),r.createElement(Pt,null),r.createElement(yt,null),r.createElement(T,null),r.createElement(_e,null),r.createElement(p,null),r.createElement(re,null),r.createElement(nn,null),r.createElement(Lt,null),r.createElement(gt,null),r.createElement(Ot,null),r.createElement(Gt,{counter:e}),r.createElement(Qe,null),r.createElement(kt,null),r.createElement(Yt,null))}},61162:(e,t,n)=>{n.r(t),n.d(t,{default:()=>h});var r=n(39601),a=n.n(r),o=n(82609),i=n.n(o),c=n(78991),l=n.n(c),u=new URL(n(77658),n.b),s=i()(a()),f=l()(u);s.push([e.id,"._S9GPUiw7uGVqxYYuxay,.QqPYymVDy5Fcp5RsmXN0{background:#fff url("+f+");background-size:5%}",""]),s.locals={Canvas:"_S9GPUiw7uGVqxYYuxay",Image:"QqPYymVDy5Fcp5RsmXN0"};const h=s},86751:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"3b113b09127085b482f0fa255f75f50b.png"},82444:(e,t,n)=>{n.d(t,{Z:()=>r});const r=n.p+"fc6c3033c539a87e55dfe5d7ca097c10.avi"},79467:(e,t,n)=>{n.d(t,{Z:()=>w});var r=n(46062),a=n.n(r),o=n(44036),i=n.n(o),c=n(96793),l=n.n(c),u=n(17892),s=n.n(u),f=n(11173),h=n.n(f),d=n(42464),m=n.n(d),v=n(61162),p={};p.styleTagTransform=m(),p.setAttributes=s(),p.insert=l().bind(null,"head"),p.domAPI=i(),p.insertStyleElement=h();var y=a()(v.default,p);if(!v.default.locals||e.hot.invalidate){var g=!v.default.locals,b=g?v:v.default.locals;e.hot.accept(61162,(t=>{v=n(61162),function(e,t,n){if(!e&&t||e&&!t)return!1;var r;for(r in e)if((!n||"default"!==r)&&e[r]!==t[r])return!1;for(r in t)if(!(n&&"default"===r||e[r]))return!1;return!0}(b,g?v:v.default.locals,g)?(b=g?v:v.default.locals,y(v.default)):e.hot.invalidate()}))}e.hot.dispose((function(){y()}));const w=v.default&&v.default.locals?v.default.locals:void 0},77658:e=>{e.exports='data:image/svg+xml,   <svg xmlns="http://www.w3.org/2000/svg" width="200" height="200"         fill-opacity=".05" >            <rect x="100" width="100" height="100" />            <rect y="100" width="100" height="100" />            </svg>'}}]);